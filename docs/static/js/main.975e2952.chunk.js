(this.webpackJsonptetromino=this.webpackJsonptetromino||[]).push([[0],{80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n.n(c),o=n(14),s=n.n(o),i=n(32),u=n(105),l=n(4),d={analytics:"G-LN4YW9ZH0J",brandName:"Tetromino",github:"https://github.com/reactgular/tetromino",storageKey:"tetromino",version:"1.0.0",base:"/tetromino"},f=n(7),j=n(45),b=function(e){return e};!function(e){e.WELCOME="welcome",e.STARTING="starting",e.RUNNING="running",e.PAUSED="paused",e.FINISHING="finishing",e.FINISHED="finished"}(r||(r={}));var m,O={buffer:{rows:[],width:0,height:0},restart_ticker:0,fast_speed:25,level:1,lines_total:0,lines_level:0,lines_level_up:1,hold_enable:!0,next:[void 0,void 0,void 0],next_max:3,player_freeze:!1,repeat_speed:100,score:0,screen:[],soft_drop:!1,sound_id:1,sound_tracks:[],status:r.WELCOME},p="game";!function(e){var t=e.game=Object(j.a)(b,(function(e){return e.game})),n=Object(j.a)(t,(function(e){return e.buffer})),c=Object(j.a)(t,(function(e){return e.screen})),a=e.status=Object(j.a)(t,(function(e){return e.status})),o=(e.welcoming=Object(j.a)(a,(function(e){return e===r.WELCOME})),e.finishing=Object(j.a)(a,(function(e){return e===r.FINISHING})),e.finished=Object(j.a)(a,(function(e){return e===r.FINISHED})),e.paused=Object(j.a)(a,(function(e){return e===r.PAUSED})),e.starting=Object(j.a)(a,(function(e){return e===r.STARTING})),e.running=Object(j.a)(a,(function(e){return e===r.RUNNING})),e.level=Object(j.a)(t,(function(e){return e.level})),e.lines=Object(j.a)(t,(function(e){return e.lines_total+e.lines_level})),e.restartTicker=Object(j.a)(t,(function(e){return e.restart_ticker})),e.score=Object(j.a)(t,(function(e){return e.score})),e.next=Object(j.a)(t,(function(e){return e.next})),e.hold=Object(j.a)(t,(function(e){return e.hold?[e.hold]:[void 0]})),e.holdEnabled=Object(j.a)(t,(function(e){return e.hold_enable})),e.repeatSpeed=Object(j.a)(t,(function(e){return e.repeat_speed})),e.screenCell=function(e){return Object(j.a)(c,(function(t){return t[e]}))},e.speed=Object(j.a)(t,(function(e){if(e.soft_drop&&e.player)return e.fast_speed;var t=500-20*e.level;return Math.max(e.fast_speed,t)})),e.size=Object(j.a)(n,(function(e){return[e.width,e.height]})));e.aspectRatio=Object(j.a)(o,(function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"".concat(n/r," / 0.9")})),e.soundTracks=Object(j.a)(t,(function(e){return e.sound_tracks})),e.toastMessage=Object(j.a)(t,(function(e){return e.toast_message}))}(m||(m={}));var v,x=["left","right","rotate_left","rotate_right","soft_drop","hard_drop","hold"],h={left:"Move Left",right:"Move Right",rotate_left:"Rotate Left",rotate_right:"Rotate Right",soft_drop:"Soft Drop",hard_drop:"Hard Drop",hold:"Hold"};!function(e){e.OPTIONS="options",e.HIGH_SCORES="high_scores",e.CREDITS="credits"}(v||(v={}));var g,y={dark:!1,ghost_piece:!0,high_scores:[],music:!0,music_type:0,music_volume:80,sound:!0,sound_volume:80,start_level:1,keys:{right:"ArrowRight",left:"ArrowLeft",rotate_left:"ArrowUp",rotate_right:"KeyZ",soft_drop:"ArrowDown",hard_drop:"Space",hold:"KeyC"}},N=d.version;!function(e){var t=e.app=Object(j.a)(b,(function(e){return e.app})),n=e.dark=Object(j.a)(t,(function(e){return Boolean(e.dark)})),r=e.highScores=Object(j.a)(t,(function(e){return e.high_scores})),c=e.ghostPiece=Object(j.a)(t,(function(e){return e.ghost_piece})),a=e.music=Object(j.a)(t,(function(e){return Boolean(e.music)})),o=e.musicType=Object(j.a)(t,(function(e){return e.music_type})),s=e.musicVolume=Object(j.a)(t,(function(e){return e.music_volume})),i=e.sound=Object(j.a)(t,(function(e){return Boolean(e.sound)})),u=e.soundVolume=Object(j.a)(t,(function(e){return e.sound_volume})),l=e.dialog=Object(j.a)(t,(function(e){return e.dialog})),f=(e.isOpen=function(e){return Object(j.a)(l,(function(t){return t===e}))},e.startLevel=Object(j.a)(t,(function(e){return e.start_level}))),m=e.keys=Object(j.a)(t,(function(e){return e.keys}));e.persist=Object(j.a)(n,c,f,i,u,a,s,o,r,m,(function(e,t,n,r,c,a,o,s,i,u){return{version:d.version,dark:e,ghost_piece:t,start_level:n,sound:r,sound_volume:c,music:a,music_volume:o,music_type:s,high_scores:i,keys:u}}))}(g||(g={}));var k,_,w=n(20),C=n(6),S=n(12),T=function(e){var t=e.getState;return function(e){return function(n){return e(Object(S.a)(Object(S.a)({},n),{},{snapshot:t()}))}}},R=n(23),E={log:console.log,error:console.error,debug:console.debug},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",n=E[t]||console[t];return n.bind(console,"".concat(e,":"))},I=n(34),L=n(54);!function(e){var t=function(e){return"".concat("app","/").concat(e)};e.dark=Object(C.b)(t("dark")),e.ghostPiece=Object(C.b)(t("ghost_piece")),e.music=Object(C.b)(t("music")),e.musicType=Object(C.b)(t("music_type")),e.musicVolume=Object(C.b)(t("music_volume")),e.sound=Object(C.b)(t("sound")),e.soundVolume=Object(C.b)(t("sound_volume")),e.open=Object(C.b)(t("open")),e.close=Object(C.b)(t("close")),e.startLevel=Object(C.b)(t("start_level")),e.recordScore=Object(C.b)(t("record_score")),e.resetScore=Object(C.b)(t("reset_store")),e.resetOptions=Object(C.b)(t("reset_options")),e.keys=Object(C.b)(t("keys")),e.persist=Object(C.b)(t("persist"))}(k||(k={})),(_||(_={})).slice=Object(C.c)({name:"app",initialState:y,reducers:{},extraReducers:function(e){e.addCase(k.dark,(function(e,t){var n=t.payload;e.dark=void 0===n?!e.dark:Boolean(n)})).addCase(k.ghostPiece,(function(e,t){var n=t.payload;e.ghost_piece=void 0===n?!e.ghost_piece:Boolean(n)})).addCase(k.music,(function(e,t){var n=t.payload;e.music=void 0===n?!e.music:Boolean(n)})).addCase(k.musicVolume,(function(e,t){var n=t.payload;e.music_volume=n})).addCase(k.musicType,(function(e,t){var n=t.payload;e.music_type=n})).addCase(k.sound,(function(e,t){var n=t.payload;e.sound=void 0===n?!e.sound:Boolean(n)})).addCase(k.soundVolume,(function(e,t){var n=t.payload;e.sound_volume=n})).addCase(k.keys,(function(e,t){var n,r=t.payload,c=Object(L.a)(x);try{for(c.s();!(n=c.n()).done;){var a=n.value;if(e.keys[a]===r.code){e.keys[a]="";break}}}catch(o){c.e(o)}finally{c.f()}e.keys[r.keyOf]=r.code})).addCase(k.open,(function(e,t){var n=t.payload;e.dialog=n})).addCase(k.close,(function(e){e.dialog=void 0})).addCase(k.startLevel,(function(e,t){var n=t.payload;void 0===n?1===e.start_level?e.start_level=5:e.start_level=e.start_level<25?e.start_level+5:1:e.start_level=Math.max(1,Math.min(n,25))})).addCase(k.recordScore,(function(e,t){var n=t.payload,r=Array.from(new Set([].concat(Object(w.a)(e.high_scores),[n])));r.sort((function(e,t){return e-t})),e.high_scores=r.reverse().slice(0,9)})).addCase(k.resetScore,(function(e){e.high_scores=[]})).addCase(k.resetOptions,(function(e){var t=e.dark,n=e.dialog,r=e.high_scores;return Object(S.a)(Object(S.a)({},y),{},{dark:t,dialog:n,high_scores:r})})).addCase(k.persist,(function(e,t){var n=t.payload,r=n.version,c=Object(I.a)(n,["version"]);if(r===d.version)return Object(S.a)(Object(S.a)({},e),c)}))}});var P,D=n(10),F=n(1),H=["".concat(d.base,"/audio/music/bonkers-for-arcades.mp3"),"".concat(d.base,"/audio/music/the-ice-cream-man.mp3"),"".concat(d.base,"/audio/music/8-bit-perplexion.mp3"),"".concat(d.base,"/audio/music/its-raining-pixels.mp3"),"".concat(d.base,"/audio/music/arcade-puzzler.mp3")],A="".concat(d.base,"/audio/sounds/power-down-13.mp3"),G="".concat(d.base,"/audio/sounds/retro-chip-power.mp3"),U="".concat(d.base,"/audio/sounds/ui-quirky-19.mp3"),z="".concat(d.base,"/audio/sounds/zapsplat_bambo_swoosh.mp3"),B="".concat(d.base,"/audio/sounds/zapsplat_level_up.mp3"),V=[A,G,U,z,B],Z=Array(11).fill(null).map((function(e,t){return 10*t})).map((function(e){return{label:"".concat(e,"%"),value:e}})),W=H.map((function(e,t){return{label:"Type ".concat(t+1),value:t}})),K={true:Object(F.jsx)(D.p,{}),false:Object(F.jsx)(D.o,{})},J={true:"Turn sound off",false:"Turn sound on"},Y={true:Object(F.jsx)(D.l,{}),false:Object(F.jsx)(D.o,{})},q={true:"Turn music off",false:"Turn music on"};!function(e){e.I="i",e.O="o",e.T="t",e.S="s",e.Z="z",e.J="j",e.L="l"}(P||(P={}));var Q=Object.values(P),X=function(e){return Math.floor(Math.random()*e)},$=function(){return Q[X(Q.length)]},ee=n(13),te=n.n(ee),ne=te.a.mark(re);function re(e){var t;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,{};case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),ne)}var ce=te.a.mark(ae);function ae(e,t){var n;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;case 1:if(!(n<t)){r.next=7;break}return r.next=4,{cells:Array.from(re(e))};case 4:n++,r.next=1;break;case 7:case"end":return r.stop()}}),ce)}function oe(e,t,n){var r=e.width,c=e.height;return t<0||t>=r||n<0||n>=c}function se(e,t,n){return void 0!==e.rows[n].cells[t].type}function ie(e,t){for(var n=e.x,r=e.y,c=e.piece,a=0;a<c.length;a++){var o=Object(f.a)(c[a],2),s=n+o[0],i=r+o[1];if(oe(t,s,i)||se(t,s,i))return!0}return!1}var ue,le,de,fe,je=n(9),be=(ue={},Object(je.a)(ue,P.O,[[[-1,0],[0,0],[-1,1],[0,1]]]),Object(je.a)(ue,P.I,[[[-2,0],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[0,1],[0,2]]]),Object(je.a)(ue,P.S,[[[0,-1],[0,0],[1,0],[1,1]],[[0,0],[1,0],[-1,1],[0,1]]]),Object(je.a)(ue,P.Z,[[[1,-1],[0,0],[1,0],[0,1]],[[-1,0],[0,0],[0,1],[1,1]]]),Object(je.a)(ue,P.L,[[[1,-1],[-1,0],[0,0],[1,0]],[[-1,-1],[0,-1],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[-1,1]],[[0,-1],[0,0],[0,1],[1,1]]]),Object(je.a)(ue,P.J,[[[-1,-1],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,0],[1,1]],[[0,-1],[1,-1],[0,0],[0,1]]]),Object(je.a)(ue,P.T,[[[0,-1],[-1,0],[0,0],[1,0]],[[0,-1],[-1,0],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[0,1]],[[0,-1],[0,0],[1,0],[0,1]]]),ue);function me(e,t){for(var n=e.x,r=e.y,c=e.type,a=e.rotate,o=be[c][a],s=new Set,i=0;i<o.length;i++){var u=Object(f.a)(o[i],2),l=u[0],d=u[1],j=t.rows[r+d];j.cells[n+l]={type:c},s.add(j)}var b=0;return s.forEach((function(e){e.cells.every((function(e){return Boolean(e.type)}))&&(e.removed=!0,b++)})),b}function Oe(e,t,n,r){var c=ye(t,n,r);ie(c,e)||(t.rotate=c.rotate,t.x=c.x,t.y=c.y)}!function(e){e.LEFT="left",e.RIGHT="right"}(fe||(fe={}));var pe=function(e){var t=Object(f.a)(e,2);return[t[0],t[1]+1]},ve=function(e){return e},xe=function(e,t){return t},he=(le={},Object(je.a)(le,fe.LEFT,(function(e){var t=Object(f.a)(e,2);return[t[0]-1,t[1]]})),Object(je.a)(le,fe.RIGHT,(function(e){var t=Object(f.a)(e,2);return[t[0]+1,t[1]]})),le),ge=(de={},Object(je.a)(de,fe.LEFT,(function(e,t){return t===e.length-1?0:t+1})),Object(je.a)(de,fe.RIGHT,(function(e,t){return 0===t?e.length-1:t-1})),de);function ye(e,t,n){var r=e.x,c=e.y,a=e.type,o=e.rotate,s=be[a],i=n(s,o),u=t([r,c]),l=Object(f.a)(u,2);return{x:l[0],y:l[1],piece:s[i],rotate:i}}var Ne=function(e,t){for(var n,r=t.x,c=t.y,a=t.type,o=t.rotate;;){var s,i,u=ye({x:(null===(s=n)||void 0===s?void 0:s.x)||r,y:(null===(i=n)||void 0===i?void 0:i.y)||c,type:a,rotate:o},pe,xe);if(ie(u,e))return n;n={x:u.x,y:u.y}}},ke=function(e){var t,n,r,c=(t=10,n=20,{rows:Array.from(ae(t,n)),width:t,height:n});return Object(S.a)(Object(S.a)({},O),{},{next:(r=e,Array(r).fill(null).map($)),buffer:c,screen:Array(c.width*c.height).fill({}),level:1,score:0,player:void 0,ghost:void 0})},_e={1:function(e){return 40},2:function(e){return 100},3:function(e){return 300},4:function(e){return 1200}},we={1:function(e){return 80},2:function(e){return 200},3:function(e){return 600},4:function(e){return 2400}},Ce={1:function(e){return 120},2:function(e){return 300},3:function(e){return 900},4:function(e){return 3600}},Se={1:function(e){return 40*(e+1)},2:function(e){return 100*(e+1)},3:function(e){return 300*(e+1)},4:function(e){return 1200*(e+1)}},Te=function(e,t,n){return function(e,t){if(0!==t){if(1===e)return _e[t](e);if(2===e)return we[t](e);if(e>=3&&e<10)return Ce[t](e);if(e>=10)return Se[t](e)}return 0}(e,n)+be[t][0].length},Re=te.a.mark(Ee);function Ee(e){var t,n,r,c,a,o,s,i;return te.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=e.rows,n=e.width,r=e.height,c=0;case 2:if(!(c<r)){u.next=14;break}a=t[c],o=a.cells,s=a.removed,i=0;case 5:if(!(i<n)){u.next=11;break}return u.next=8,{type:o[i].type,glow:s};case 8:i++,u.next=5;break;case 11:c++,u.next=2;break;case 14:case"end":return u.stop()}}),Re)}function Me(e,t,n,r){var c=e.width,a=Array.from(Ee(e));if(t){var o=Ie(a,c,(function(e){e.type=t.type,e.ghost=.2})),s=Ie(a,c,(function(e){e.type=t.type,e.ghost=void 0})),i=t.y-r,u=Ie(a,c,(function(e,n,c){e.type||(e.type=t.type,e.ghost=(.2-.05)*function(e){return(e-r)/i}(c)+.05)}));be[t.type][t.rotate].forEach((function(e){var c=Object(f.a)(e,2),a=c[0],i=c[1];if(n&&o(n.x+a,n.y+i),s(t.x+a,t.y+i),void 0!==r)for(var l=r;l<t.y;l++)u(t.x+a,l+i)}))}return a}function Ie(e,t,n){return function(r,c){n(e[c*t+r],r,c)}}var Le,Pe,De=function(e,t){e.sound_tracks.push({id:e.sound_id++,src:t})};function Fe(e){var t=e.rows.findIndex((function(e){return e.removed}));return-1!==t&&(function(e,t){var n=e.rows,r=e.width;n.splice(t,1),n.unshift({cells:Array.from(re(r))})}(e,t),!0)}!function(e){var t=function(e){return"".concat(p,"/").concat(e)};e.level=Object(C.b)(t("level")),e.softDrop=Object(C.b)(t("soft_drop")),e.hardDrop=Object(C.b)(t("hard_drop")),e.start=Object(C.b)(t("start")),e.run=Object(C.b)(t("run")),e.pause=Object(C.b)(t("pause")),e.resume=Object(C.b)(t("resume")),e.quit=Object(C.b)(t("quit")),e.tick=Object(C.b)(t("tick")),e.finishing=Object(C.b)(t("finishing")),e.render=Object(C.b)(t("render")),e.bufferSet=Object(C.b)(t("bufferSet")),e.bufferPatch=Object(C.b)(t("bufferPatch")),e.patch=Object(C.b)(t("patch")),e.rotate=Object(C.b)(t("rotate")),e.move=Object(C.b)(t("move")),e.hold=Object(C.b)(t("hold")),e.soundTrack=Object(C.b)(t("soundTrack")),e.toast=Object(C.b)(t("toast"))}(Le||(Le={})),(Pe||(Pe={})).slice=Object(C.c)({name:p,initialState:O,reducers:{},extraReducers:function(e){e.addCase(Le.level,(function(e,t){var n=t.payload;e.level=n})).addCase(Le.softDrop,(function(e,t){var n=t.payload;e.soft_drop=n})).addCase(Le.start,(function(e,t){var n=t.payload,c=ke(e.next_max);return Object(S.a)(Object(S.a)({},c),{},{level:n,status:r.STARTING})})).addCase(Le.run,(function(e,t){e.status=r.RUNNING})).addCase(Le.pause,(function(e,t){e.status=r.PAUSED})).addCase(Le.resume,(function(e,t){e.status=r.STARTING})).addCase(Le.quit,(function(e){return ke(e.next_max)})).addCase(Le.render,(function(e,t){e.screen=Me(e.buffer,e.player,e.ghost)})).addCase(Le.tick,(function(e,t){var n=t.snapshot;if(e.player){var c=function(e,t){var n=ye(t,pe,xe);return ie(n,e)?{collision:!0,lines:me(t,e)}:(t.y=n.y,{collision:!1})}(e.buffer,e.player),a=c.collision,o=c.lines;if(a){var s=e.level,i=function(e,t,n){return e.score=e.score+Te(e.level,t,n),e.lines_level=e.lines_level+n,e.lines_level>=e.lines_level_up?(e.lines_total+=e.lines_level,e.lines_level=0,e.level++,G):e.player_freeze?void 0:U}(e,e.player.type,o);s!==e.level&&e.level%5===0&&(e.toast_message="Level ".concat(e.level),(null===n||void 0===n?void 0:n.app.sound)&&De(e,B)),(null===n||void 0===n?void 0:n.app.sound)&&i&&De(e,i),e.player_freeze=!1,e.hold_enable=!0,e.player=void 0,e.ghost=void 0}else e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?Ne(e.buffer,e.player):void 0}else if(!Fe(e.buffer)){var u=e.next.shift();e.next.length<e.next_max&&e.next.push($());var l=function(e,t){var n=be[e][0].some((function(e){var t=Object(f.a)(e,2);return t[0],t[1]<0}))?1:0;return{x:Math.floor(t/2),y:n,type:e,rotate:0}}(u,e.buffer.width);ie(ye(l,ve,xe),e.buffer)?((null===n||void 0===n?void 0:n.app.sound)&&De(e,A),e.restart_ticker++,e.status=r.FINISHING):(e.player=l,e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?Ne(e.buffer,l):void 0)}e.screen=Me(e.buffer,e.player,e.ghost)})).addCase(Le.finishing,(function(e,t){t.snapshot;var n=e.buffer.rows.find((function(e){return e.removed}));if(n)e.score+=n.cells.filter((function(e){return Boolean(e.type)})).length,Fe(e.buffer);else{var c=e.buffer.rows.find((function(e){return e.cells.some((function(e){return Boolean(e.type)}))}));c?c.removed=!0:e.status=r.FINISHED}e.screen=Me(e.buffer,e.player,e.ghost)})).addCase(Le.hardDrop,(function(e,t){var n=t.snapshot;if(e.player&&!e.player_freeze){var r=e.player.y;!function(e,t){for(;;){var n=ye(t,pe,xe);if(ie(n,e))break;t.y=n.y}}(e.buffer,e.player),e.restart_ticker++,e.screen=Me(e.buffer,e.player,void 0,r),e.player_freeze=!0,e.ghost=void 0,(null===n||void 0===n?void 0:n.app.sound)&&(De(e,z),De(e,U))}})).addCase(Le.bufferSet,(function(e,t){var n=t.payload;e.buffer=n})).addCase(Le.bufferPatch,(function(e,t){t.payload.forEach((function(t){return function(e,t){var n=t.x,r=t.y,c=Object(I.a)(t,["x","y"]);e.rows[r].cells[n]=c}(e.buffer,t)}))})).addCase(Le.rotate,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(Oe(e.buffer,e.player,ve,ge[n]),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?Ne(e.buffer,e.player):void 0,e.screen=Me(e.buffer,e.player,e.ghost))})).addCase(Le.move,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(Oe(e.buffer,e.player,he[n],xe),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?Ne(e.buffer,e.player):void 0,e.screen=Me(e.buffer,e.player,e.ghost))})).addCase(Le.hold,(function(e){e.player&&(e.hold&&(e.next=[e.hold].concat(Object(w.a)(e.next))),e.hold=e.player.type,e.hold_enable=!1,e.player=void 0,e.ghost=void 0,e.restart_ticker++,e.screen=Me(e.buffer,e.player,e.ghost))})).addCase(Le.soundTrack,(function(e,t){var n=t.payload;e.sound_tracks=e.sound_tracks.filter((function(e){return e.id!==n}))})).addCase(Le.patch,(function(e,t){var n=t.payload,r=t.snapshot,c=(null===r||void 0===r?void 0:r.app.ghost_piece)&&e.player?Ne(e.buffer,e.player):void 0,a=Me(e.buffer,e.player,c);return Object(S.a)(Object(S.a)(Object(S.a)({},e),n),{},{ghost:c,screen:a})}))}});var He=function(){return Object(R.b)({app:_.slice.reducer,game:Pe.slice.reducer})};var Ae,Ge=function(){return Object(l.b)()},Ue=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=He();return Object(C.a)({devTools:{name:d.brandName,maxAge:100},preloadedState:e,reducer:t,middleware:function(e){return[].concat(Object(w.a)(e()),[T])}})}(e)},ze=n(108),Be=n(5),Ve=n.n(Be),Ze=(n(80),function(e){var t=e.onClose,n=void 0===t?function(){return null}:t,r=e.open,a=e.title,o=e.large,s=e.children,l=e.className,d=Object(u.a)("(max-width:375px)"),f=Object(c.useMemo)((function(){return o&&d}),[o,d]);return function(e,t){Object(c.useEffect)((function(){var n;e&&i.a.modalview((n=t)&&n.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("-"))}),[e,t])}(r,a),Object(F.jsxs)(ze.a,{className:Ve()("ui-dialog",{fullScreen:f}),PaperProps:{className:Ve()("ui-dialog-paper",l,{"border-primary":!f,fullScreen:f})},open:r,onClose:n,fullScreen:f,children:[Object(F.jsxs)("div",{className:"ui-dialog-title text-primary",children:[a,o&&Object(F.jsx)("button",{className:"ml:hidden flex absolute top-0 -left-3 p-3 dark:text-white text-black text-sm",onClick:n,children:Object(F.jsx)(D.a,{})})]}),Object(F.jsx)("div",{className:"flex flex-col",children:s})]})}),We=function(e){var t=e.closeAction,n=void 0===t?k.close():t,r=e.selectOpen,c=e.title,a=e.large,o=e.children,s=e.className,i=Ge(),u=Object(l.c)(r);return Object(F.jsx)(Ze,{className:s,open:Boolean(u),title:c,large:a,onClose:function(){return i(n)},children:o})},Ke=function(e){var t=e.credits,n=e.className;return Object(F.jsx)("div",{className:Ve()(n,"flex flex-col text-xs -mb-3"),children:t.map((function(e,t){var n=e.title,r=e.desc,c=e.url;return Object(F.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(F.jsxs)("div",{children:[n,":"]}),Object(F.jsx)("a",{href:c,className:"text-primary hover:underline",children:r})]},t)}))})},Je=[{title:"UX Design by",desc:"Zayn Assalam",url:"https://dribbble.com/shots/14684127-Tetris-Mobile-App"},{title:"Programmed by",desc:"Nick Foscarini",url:"https://www.linkedin.com/in/nick-foscarini/"},{title:"Built with",desc:"ReactJS",url:"https://reactjs.org/"},{title:"States managed by",desc:"Redux Toolkit",url:"https://redux-toolkit.js.org/"},{title:"Styled with",desc:"tailwindcss",url:"https://tailwindcss.com/"},{title:"Source code",desc:"GitHub",url:d.github}],Ye=function(e){var t=e.selectOpen,n=void 0===t?g.isOpen(v.CREDITS):t;return Object(F.jsx)(We,{className:"max-w-[12rem]",title:"Credits",selectOpen:n,children:Object(F.jsx)(Ke,{credits:Je})})},qe=n(61),Qe=n(60),Xe=n(110),$e=Object(c.createContext)({transparent:!1,large:!1}),et=function(){return Object(c.useContext)($e)},tt=function(e){var t=e.transparent,n=e.large,r=e.children,a=Object(c.useMemo)((function(){return{transparent:t,large:n}}),[t,n]);return Object(F.jsx)($e.Provider,{value:a,children:r})};n(81);!function(e){e[e.NORMAL=0]="NORMAL",e[e.ROUND=1]="ROUND",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN"}(Ae||(Ae={}));var nt=function(e){var t=e.active,n=e.preventFocus,r=e.primary,a=e.secondary,o=e.toolTip,s=e.shape,i=void 0===s?Ae.NORMAL:s,u=e.className,l=e.children,d=(e.onMouseDown,e.onMouseUp,e.onPress),f=e.onRelease,j=Object(I.a)(e,["active","preventFocus","primary","secondary","toolTip","shape","className","children","onMouseDown","onMouseUp","onPress","onRelease"]),b=Object(c.useRef)(!1),m=et().transparent,O=Object(c.useMemo)((function(){return Ve()(u,"ui-button",{"ui-button-standard":!m,"ui-button-trans":m,"ui-shape-round":i===Ae.ROUND,"ui-shape-normal":i===Ae.NORMAL,"ui-shape-left":i===Ae.LEFT,"ui-shape-right":i===Ae.RIGHT,"ui-shape-up":i===Ae.UP,"ui-shape-down":i===Ae.DOWN,"text-primary":r,"text-secondary":a,active:t})}),[t,r,a,i,m,u]);return Object(F.jsx)(Xe.a,{title:o||"",children:Object(F.jsx)("button",Object(S.a)(Object(S.a)({className:O,onTouchStart:function(){b.current=!0,d&&d()},onTouchEnd:function(){f&&f()},onMouseDown:function(e){n&&e.preventDefault(),!b.current&&d&&d()},onMouseUp:function(e){!b.current&&f&&f()}},j),{},{children:l}))})},rt=function(e){var t=e.tools,n=e.className,r=Ge();return Object(F.jsx)("div",{className:Ve()(n,"flex justify-between w-full"),children:t.map((function(e,t){var n=e.icon,c=e.toolTip,a=e.active,o=e.action;return Object(F.jsx)(nt,{className:"rounded-full text-[12px] p-2",primary:!0,active:a,onClick:function(){return r(o)},toolTip:c,children:n},t)}))})},ct=function(e){var t,n=e.value,r=e.digits,a=e.primary,o=void 0===a||a,s=e.className,i=function(e){return Object(c.useMemo)((function(){return"0".repeat(e)}),[e])}(r),u=function(e,t){return Object(c.useMemo)((function(){var n=e.toString();return n.length>t?"9".repeat(t):n}),[e,t])}(n,r),l=(t=r-u.length,Object(c.useMemo)((function(){return{__html:"&nbsp;".repeat(t)}}),[t])),d=Object(c.useMemo)((function(){return{"text-primary":o,"text-secondary":!o}}),[o]);return Object(F.jsx)("div",{className:Ve()(s,"flex relative leading-none font-digits p-2"),children:Object(F.jsxs)("div",{className:"relative mx-auto",children:[Object(F.jsx)("div",{className:Ve()("opacity-20",d),children:i}),Object(F.jsxs)("div",{className:Ve()("absolute top-0 left-0",d),children:[Object(F.jsx)("span",{dangerouslySetInnerHTML:l}),Object(F.jsx)("span",{children:u})]})]})})},at=function(e){var t=e.rank,n=e.score,r=e.className;return Object(F.jsxs)("div",{className:Ve()(r,"flex font-mono items-baseline space-x-4"),children:[Object(F.jsxs)("div",{className:"text-light",children:["#",t]}),Object(F.jsx)(ct,{digits:6,value:n})]})},ot=function(e){var t=e.actionHome,n=void 0===t?Le.quit():t,r=e.actionRestart,a=void 0===r?Le.start(1):r,o=e.actionHighScores,s=void 0===o?k.open(v.HIGH_SCORES):o,i=e.className,u=Object(l.c)(m.score),d=Object(l.c)(g.highScores),f=Ge();Object(c.useEffect)((function(){f(k.recordScore(u))}),[f,u]);var j=Object(c.useMemo)((function(){return[{icon:Object(F.jsx)(D.j,{}),toolTip:"Home",action:n},{icon:Object(F.jsx)(Qe.a,{}),toolTip:"Restart",action:a},{icon:Object(F.jsx)(qe.a,{}),toolTip:"High Scores",action:s}]}),[n,a,s]),b=Object(c.useMemo)((function(){return d.indexOf(u)+1}),[d,u]);return Object(F.jsxs)("div",{className:Ve()(i,"flex flex-col text-2xl"),children:[Object(F.jsxs)("div",{className:"flex flex-col ml-auto mr-auto",children:[Object(F.jsx)("div",{className:"font-mono text-center",children:"Your Score"}),Object(F.jsx)(at,{rank:b,score:u}),Object(F.jsx)("div",{className:"font-mono text-center mt-5",children:"Your Best"}),Object(F.jsx)(at,{rank:1,score:d[0]||0})]}),Object(F.jsx)(rt,{className:"mt-5",tools:j})]})},st=function(e){var t=e.selectStart,n=void 0===t?g.startLevel:t,r=e.selectOpen,c=void 0===r?m.finished:r,a=Object(l.c)(n);return Object(F.jsx)(We,{className:"max-w-[12rem]",title:"Game Over",selectOpen:c,children:Object(F.jsx)(ot,{actionRestart:Le.start(a)})})},it=function(e){var t=e.selectScores,n=void 0===t?g.highScores:t,r=e.className,a=Object(l.c)(n),o=Object(c.useMemo)((function(){return[].concat(Object(w.a)(a||[]),Object(w.a)(Array(10).fill(0))).slice(0,9)}),[a]);return Object(F.jsx)("div",{className:Ve()(r,"flex flex-col text-2xl"),children:o.map((function(e,t){return Object(F.jsx)(at,{rank:t+1,score:e},t)}))})},ut=function(e){var t=e.selectOpen,n=void 0===t?g.isOpen(v.HIGH_SCORES):t;return Object(F.jsx)(We,{className:"max-w-[12rem]",title:"High Scores",selectOpen:n,children:Object(F.jsx)(it,{className:"ml-auto mr-auto"})})},lt=function(e){var t=e.className;return Object(F.jsxs)("div",{className:Ve()(t,"flex text-xs space-x-2"),children:[Object(F.jsxs)("div",{children:["Version ",d.version]}),Object(F.jsxs)("a",{href:d.github,className:"flex text-primary hover:underline items-center space-x-1",children:[Object(F.jsx)(D.i,{}),Object(F.jsx)("span",{children:"Source"})]})]})},dt=function(e){var t=e.value,n=e.onChange,r=e.iconOn,a=e.iconOff,o=e.className,s=Object(c.useMemo)((function(){var e=r||Object(F.jsx)(D.c,{className:"text-green-200"});return Object(c.cloneElement)(e,{className:"text-[24px] mr-1 ".concat(e.props.className)})}),[r]),i=Object(c.useMemo)((function(){var e=a||Object(F.jsx)(D.n,{className:"text-red-500"});return Object(c.cloneElement)(e,{className:"text-[24px] ".concat(e.props.className)})}),[a]);return Object(F.jsxs)("div",{className:Ve()(o,"flex relative p-1 text-[26px] h-[26px] w-[50px] bg-black rounded-full cursor-pointer items-center justify-between"),onClick:function(){return n(!t)},children:[s,i,Object(F.jsx)("div",{className:Ve()("bg-white rounded-full absolute top-[2px] left-[2px] h-[22px] w-[22px] transition-transform transform translate-x-0",{"translate-x-[24px]":Boolean(t)})})]})},ft=function(e){var t=e.selectDark,n=void 0===t?g.dark:t,r=e.className,c=Object(l.c)(n),a=Ge();return Object(F.jsx)(dt,{className:r,onChange:function(e){return a(k.dark(e))},value:c,iconOn:Object(F.jsx)(D.k,{className:"text-blue-200"}),iconOff:Object(F.jsx)(D.m,{className:"text-yellow-500"})})};function jt(e){var t,n=e.onChange,r=e.options,a=e.value,o=Object(c.useMemo)((function(){return r.findIndex((function(e){return e.value===a}))}),[a,r]),s=Object(c.useCallback)((function(){var e=Math.min(r.length-1,o+1);n(r[e].value)}),[n,r,o]),i=Object(c.useCallback)((function(){var e=Math.max(0,o-1);n(r[e].value)}),[n,r,o]);return Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)(nt,{className:"px-4",onClick:i,disabled:o<=0,children:"-"}),Object(F.jsx)("div",{className:"flex-grow text-center",children:null===(t=r[o])||void 0===t?void 0:t.label}),Object(F.jsx)(nt,{className:"px-4",onClick:s,disabled:o>=r.length-1,children:"+"})]})}var bt,mt,Ot=function(){var e=Object(l.c)(g.music),t=Object(l.c)(g.musicType),n=Object(l.c)(g.musicVolume),r=Object(l.c)(g.sound),c=Object(l.c)(g.soundVolume),a=Ge();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:"Sound Fx"}),Object(F.jsx)(nt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:r,onClick:function(){return a(k.sound())},children:K[r.toString()]}),Object(F.jsx)("div",{children:"Sound Fx Volume"}),Object(F.jsx)(jt,{options:Z,value:c,onChange:function(e){return a(k.soundVolume(e))}}),Object(F.jsx)("div",{children:"Music"}),Object(F.jsx)(nt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return a(k.music())},children:Y[e.toString()]}),Object(F.jsx)("div",{children:"Music Volume"}),Object(F.jsx)(jt,{options:Z,value:n,onChange:function(e){return a(k.musicVolume(e))}}),Object(F.jsx)("div",{children:"Music Type"}),Object(F.jsx)(jt,{options:W,value:t,onChange:function(e){return a(k.musicType(e))}})]})},pt=function(){var e=Object(l.c)(g.ghostPiece),t=Ge();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:"Ghost Piece"}),Object(F.jsx)(nt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return t(k.ghostPiece())},children:e?Object(F.jsx)(D.c,{}):Object(F.jsx)(D.n,{})})]})},vt=["Digit","Key","Arrow"],xt=function(e){var t=e.label,n=e.keyCode,r=e.onClick,a=Object(c.useMemo)((function(){return function(e){return e&&e.replace(/[-_]/g," ").replace(/([A-Z])/g," $1")}(vt.reduce((function(e,t){return e.replace(t,"").trim()}),n))}),[n]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:t}),Object(F.jsx)(nt,{className:"w-full",onClick:r,children:a})]})},ht=function(e){var t=e.keyOf,n=e.onChange;return Object(c.useEffect)((function(){var e=function(e){var t=e.code;return n(t)};return document.addEventListener("keydown",e,{once:!0}),function(){return document.removeEventListener("keydown",e)}})),Object(F.jsx)("div",{className:"text-2xl font-bold text-center w-full uppercase",children:h[t]})},gt=function e(t){var n=t.selectKeys,r=void 0===n?g.keys:n,a=t.actionKeys,o=void 0===a?k.keys:a,s=Object(c.useState)(),i=Object(f.a)(s,2),u=i[0],d=i[1],j=Object(l.c)(r),b=Ge(),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";return Object(c.useMemo)((function(){return M(e,t)}),[e,t])}(e.name);return Object(F.jsxs)(F.Fragment,{children:[x.map((function(e,t){return Object(F.jsx)(xt,{keyCode:j[e],label:h[e],onClick:function(){return d(e)}},t)})),Object(F.jsxs)(Ze,{className:"max-w-[22rem]",title:"Press Key",open:Boolean(u),onClose:function(){return d(void 0)},children:[Object(F.jsx)(ht,{keyOf:u,onChange:function(e){m({pickKey:u,code:e}),b(o({keyOf:u,code:e})),d(void 0)}}),Object(F.jsx)(nt,{className:"mt-5 ml-auto mr-auto px-6 py-2",primary:!0,onClick:function(){return d(void 0)},children:"Cancel"})]})]})},yt=function(e){var t=e.darkMode,n=e.className,r=Ge();return Object(F.jsxs)("div",{className:Ve()(n,"flex flex-col"),children:[Object(F.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[Object(F.jsx)(gt,{}),Object(F.jsx)(pt,{}),Object(F.jsx)(Ot,{}),Object(F.jsx)(nt,{className:"mt-3 py-2",onClick:function(){return r(k.resetScore())},children:"Reset High Scores"}),Object(F.jsx)(nt,{className:"mt-3 py-2",onClick:function(){return r(k.resetOptions())},children:"Reset Options"})]}),t&&Object(F.jsx)(ft,{className:"ml-auto mr-auto mt-5"})]})},Nt=function(e){var t=e.selectWelcoming,n=void 0===t?m.welcoming:t,r=e.selectOpen,c=void 0===r?g.isOpen(v.OPTIONS):r,a=Object(l.c)(n);return Object(F.jsxs)(We,{className:"max-w-[22rem]",title:"Options",large:!0,selectOpen:c,children:[Object(F.jsx)(yt,{darkMode:!a}),Object(F.jsx)(lt,{className:"mt-auto mx-auto mt-5"})]})},kt=function(e){var t=e.items,n=e.className,r=Ge();return Object(F.jsx)("div",{className:Ve()(n,"flex flex-col"),children:t.map((function(e,t){var n=e.action,c=e.active,a=e.title;return Object(F.jsx)(nt,{className:"py-2 px-4 mb-4",primary:c,onClick:function(){return r(n)},children:a},t)}))})},_t=function(e){var t=e.selectMusic,n=void 0===t?g.music:t,r=e.selectSound,a=void 0===r?g.sound:r,o=e.selectStart,s=void 0===o?g.startLevel:o,i=e.closeAction,u=void 0===i?Le.resume():i,d=e.selectOpen,f=void 0===d?m.paused:d,j=Object(l.c)(n),b=Object(l.c)(a),O=Object(l.c)(s),p=Object(c.useMemo)((function(){return[{icon:K[b.toString()],toolTip:J[b.toString()],active:b,action:k.sound()},{icon:Y[j.toString()],toolTip:q[j.toString()],active:j,action:k.music()},{icon:Object(F.jsx)(D.h,{}),toolTip:"Options",action:k.open(v.OPTIONS)}]}),[j,b]),x=Object(c.useMemo)((function(){return[{title:"Continue",action:Le.resume(),active:!0},{title:"Restart",action:Le.start(O)},{title:"Quit Game",action:Le.quit()}]}),[O]);return Object(F.jsxs)(We,{className:"max-w-[12rem]",title:"Paused",selectOpen:f,closeAction:u,children:[Object(F.jsx)(kt,{className:"mb-5",items:x}),Object(F.jsx)(rt,{tools:p})]})},wt=(bt={},Object(je.a)(bt,r.WELCOME,"Welcome"),Object(je.a)(bt,r.STARTING,"Starting"),Object(je.a)(bt,r.RUNNING,"Playing"),Object(je.a)(bt,r.PAUSED,"Paused"),Object(je.a)(bt,r.FINISHING,"Game Over"),Object(je.a)(bt,r.FINISHED,"Game Over"),bt),Ct=function(e){var t=e.label,n=e.className,r=e.children,c=et().transparent;return Object(F.jsxs)("div",{className:Ve()(n,"flex items-center w-full",{"flex-col":!c,"flex-col-reverse":c}),children:[Object(F.jsx)("div",{className:"flex text-light mb-1",children:t}),Object(F.jsx)("div",{className:Ve()("flex w-full flex-col",{"border border-gray-200 dark:border-gray-600 rounded-lg":c,"dark:nm-inset-gray-800 nm-inset-gray-100":!c}),children:r})]})},St=(n(83),mt={},Object(je.a)(mt,P.I,"color-i"),Object(je.a)(mt,P.O,"color-o"),Object(je.a)(mt,P.T,"color-t"),Object(je.a)(mt,P.S,"color-s"),Object(je.a)(mt,P.Z,"color-z"),Object(je.a)(mt,P.J,"color-j"),Object(je.a)(mt,P.L,"color-l"),mt),Tt=function(e){var t=e.ghost,n=e.glow,r=e.grid,a=e.speed,o=e.type,s=Object(c.useMemo)((function(){var e={};return o&&n&&a&&(e.animationDuration="".concat(a,"ms")),t&&(e.opacity="".concat(t)),e}),[o,n,a,t]);return Object(F.jsx)("div",{className:Ve()("game-block",{"game-block-border":r}),"data-testid":"game-block",children:Object(F.jsx)("div",{className:Ve()("block-color relative w-full h-full rounded-sm",!n&&o&&St[o],{"color-glow":o&&n,ghost:o&&t,fill:o&&!t}),style:s})})},Rt=function(e){var t=e.center,n=void 0===t?[2,1]:t,r=e.grid,a=void 0===r||r,o=e.count,s=void 0===o?4:o,i=e.type,u=void 0===i?P.Z:i,l=e.values,d=e.className,j=Object(c.useMemo)((function(){var e=Object(f.a)(n,2),t=e[0],r=e[1],c=Array(s*s).fill(void 0);return null===l||void 0===l||l.forEach((function(e){var n=Object(f.a)(e,2),a=n[0],o=n[1];return c[o*s+a+t+r*s]=u})),c}),[s,n,u,l]);return Object(F.jsx)("div",{className:Ve()(d,"grid w-full",{"game-grid":a}),style:{gridTemplateColumns:"repeat(".concat(s,", minmax(0, 1fr))")},children:j.map((function(e,t){return Object(F.jsx)(Tt,{type:e,grid:a},t)}))})},Et=function(e){var t=e.label,n=e.selectPieces,r=e.className,c=Object(l.c)(n);return Object(F.jsx)(Ct,{label:t,children:Object(F.jsx)("div",{className:Ve()(r,"flex flex-col relative w-full"),children:c.map((function(e,t){return Object(F.jsx)(Rt,{values:e?be[e][0]:void 0,type:e,grid:!1},t)}))})})},Mt=n(62),It=function(e){var t=e.keyCode,n=e.onPress,r=e.onRelease;return Object(c.useEffect)((function(){var e=function(e){e.repeat||e.code!==t||("keydown"===e.type&&n&&n(),"keyup"===e.type&&r&&r())};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[t,n,r]),null},Lt=function(e){var t=e.disabled,n=e.keyCode,r=e.onHold,a=e.className,o=Object(c.useState)(!1),s=Object(f.a)(o,2),i=s[0],u=s[1],l=et().large;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(nt,{"data-testid":"game-hold",className:Ve()(a,"flex text-sm",{"p-2":!l,"p-3":l}),preventFocus:!0,disabled:t,active:i&&!t,shape:Ae.ROUND,onClick:function(){return r()},children:Object(F.jsx)(Mt.a,{})}),Object(F.jsx)(It,{keyCode:n,onPress:function(){!t&&r(),u(!0)},onRelease:function(){u(!1)}})]})},Pt=n(51),Dt=function(e){var t=e.disabled,n=e.keyCodeLeft,r=e.keyCodeRight,a=e.onRotateLeft,o=e.onRotateRight,s=e.className,i=Object(c.useState)(!1),u=Object(f.a)(i,2),l=u[0],d=u[1],j=Object(c.useState)(!1),b=Object(f.a)(j,2),m=b[0],O=b[1],p=et().large,v=Object(c.useMemo)((function(){return Ve()(s,"flex text-lg items-center justify-center",{"w-14 h-14":!p,"w-16 h-16":p})}),[s,p]);return Object(F.jsxs)("div",{className:"flex gap-4 my-auto",children:[Object(F.jsx)(nt,{"data-testid":"game-rotate-left",className:v,preventFocus:!0,disabled:t,active:l,shape:Ae.LEFT,onPress:a,children:Object(F.jsx)(Pt.a,{})}),Object(F.jsx)(nt,{"data-testid":"game-rotate-right",className:v,preventFocus:!0,disabled:t,active:m,shape:Ae.RIGHT,onPress:o,children:Object(F.jsx)(Pt.b,{})}),!t&&Object(F.jsx)(It,{keyCode:n,onPress:function(){a(),d(!0)},onRelease:function(){d(!1)}}),!t&&Object(F.jsx)(It,{keyCode:r,onPress:function(){o(),O(!0)},onRelease:function(){O(!1)}})]})},Ft=function(e){var t=e.className,n=Ge(),r=et().large;return Object(F.jsx)(nt,{"data-testid":"game-settings",className:Ve()(t,"flex text-sm",{"p-2":!r,"p-3":r}),preventFocus:!0,primary:!0,shape:Ae.ROUND,onClick:function(){return n(Le.pause())},children:Object(F.jsx)(D.b,{})})},Ht=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onDrop,o=e.shape,s=e.className,i=Object(c.useState)(!1),u=Object(f.a)(i,2),l=u[0],d=u[1],j=et().large;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(nt,{className:Ve()(s,"items-center justify-center",{"p-4":!j,"p-5":j}),disabled:t,preventFocus:!0,shape:o,active:l,"data-testid":"game-soft-drop",onPress:function(){return a(!0)},onRelease:function(){return a(!1)},children:n}),!t&&Object(F.jsx)(It,{keyCode:r,onPress:function(){a(!0),d(!0)},onRelease:function(){a(!1),d(!1)}})]})},At=function(e){var t=e.emitFirst,n=e.disabled,r=e.onRepeat,a=e.speed;return Object(c.useEffect)((function(){if(!n&&(t&&r(),a>0)){var e=setInterval((function(){return r()}),a);return function(){return clearInterval(e)}}}),[t,n,r,a]),null},Gt=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onMove,o=e.speed,s=void 0===o?500:o,i=e.shape,u=e.className,l=Object(c.useState)(0),d=Object(f.a)(l,2),j=d[0],b=d[1],m=Object(c.useState)(!1),O=Object(f.a)(m,2),p=O[0],v=O[1],x=et().large;Object(c.useEffect)((function(){p&&1!==j&&a()}),[p,j,a]);var h=Object(c.useCallback)((function(){v(!0),b(0)}),[]),g=Object(c.useCallback)((function(){return v(!1)}),[]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(nt,{"data-testid":"game-move",className:Ve()("items-center justify-center",u,{"p-4":!x,"p-5":x}),preventFocus:!0,disabled:t,active:p,shape:i,onPress:function(){return h()},onRelease:function(){return g()},children:n}),!t&&Object(F.jsx)(It,{keyCode:r,onPress:h,onRelease:g}),!t&&Object(F.jsx)(At,{onRepeat:function(){return b(j+1)},disabled:!p,speed:s})]})},Ut=function(e){var t=e.disabled,n=e.hardDrop,r=e.left,c=e.right,a=e.softDrop,o=e.onHardDrop,s=e.onLeft,i=e.onRight,u=e.onSoftDrop,l=e.speed,d=void 0===l?500:l,f=e.className;return Object(F.jsxs)("div",{className:Ve()(f,"grid grid-cols-3 gap-1"),children:[Object(F.jsx)(Ht,{className:"col-start-2",disabled:t,icon:Object(F.jsx)(D.g,{}),keyCode:n,onDrop:function(e){e&&o()},shape:Ae.UP}),Object(F.jsx)(Gt,{className:"col-start-1",disabled:t,icon:Object(F.jsx)(D.e,{}),keyCode:r,onMove:s,speed:d,shape:Ae.LEFT}),Object(F.jsx)(Gt,{className:"col-start-3",disabled:t,icon:Object(F.jsx)(D.f,{}),keyCode:c,onMove:i,speed:d,shape:Ae.RIGHT}),Object(F.jsx)(Ht,{className:"col-start-2",disabled:t,icon:Object(F.jsx)(D.d,{}),keyCode:a,onDrop:u,shape:Ae.DOWN})]})},zt=function(e){var t=e.selectKeys,n=void 0===t?g.keys:t,r=e.selectRepeatSpeed,c=void 0===r?m.repeatSpeed:r,a=e.selectEnabled,o=void 0===a?m.running:a,s=e.selectHoldEnabled,i=void 0===s?m.holdEnabled:s,u=e.transparent,d=e.className,f=Object(l.c)(n),j=f.left,b=f.right,O=f.rotate_left,p=f.rotate_right,v=f.soft_drop,x=f.hard_drop,h=f.hold,y=Object(l.c)(c),N=Object(l.c)(o),k=Object(l.c)(i),_=Ge(),w=et().large;return Object(F.jsx)("div",{className:Ve()(d,"flex relative"),children:Object(F.jsxs)(tt,{transparent:Boolean(u),large:w,children:[Object(F.jsx)(Ut,{disabled:!N,left:j,right:b,softDrop:v,hardDrop:x,onLeft:function(){return _(Le.move(fe.LEFT))},onRight:function(){return _(Le.move(fe.RIGHT))},onSoftDrop:function(e){return _(Le.softDrop(e))},onHardDrop:function(){return _(Le.hardDrop())},speed:y}),Object(F.jsxs)("div",{className:"flex relative ml-auto",children:[Object(F.jsx)(Lt,{className:"absolute top-0 left-0",keyCode:h,disabled:!N||!k,onHold:function(){_(Le.hold()),_(Le.tick())}}),Object(F.jsx)(Dt,{disabled:!N,keyCodeLeft:O,keyCodeRight:p,onRotateLeft:function(){return _(Le.rotate(fe.LEFT))},onRotateRight:function(){return _(Le.rotate(fe.RIGHT))}})]}),Object(F.jsx)(Ft,{className:"absolute top-0 right-0"})]})})},Bt=function(e,t,n){var r=Object(c.useMemo)((function(){return[e,t].concat(Object(w.a)(n))}),[e,t,n]);Object(c.useEffect)((function(){var n=setInterval((function(){return e()}),t);return function(){return clearInterval(n)}}),r)},Vt=function(e){var t=e.speed,n=e.onTick;return Bt((function(){return n()}),t,[t,n]),null},Zt=function(e){var t=e.count,n=e.onStart,r=e.className,a=Object(c.useState)((function(){return t})),o=Object(f.a)(a,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){if(s>0){var e=setInterval((function(){return i(s-1)}),1e3);return function(){return clearInterval(e)}}0===s&&n()}),[s,n]),Object(F.jsx)("div",{"data-testid":"game-timer",className:Ve()(r,"flex font-mono items-center justify-center text-9xl"),children:s>0?s:""})};Zt.defaultProps={count:3};var Wt=function(e){var t=e.indx,n=Object(l.c)(m.screenCell(t)),r=Object(l.c)(m.speed);return n?Object(F.jsx)(Tt,{type:n.type,glow:n.glow,ghost:n.ghost,speed:r,grid:!0}):null},Kt=(n(84),function(e){var t=e.className,n=Object(l.c)(m.size),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return Array(a*o).fill(null)}),[a,o]);return Object(F.jsx)("div",{className:Ve()(t,"game-grid ml-auto mr-auto w-full"),style:{gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))")},children:s.map((function(e,t){return Object(F.jsx)(Wt,{indx:t},t)}))})}),Jt=function(e){var t=e.autoPlay,n=void 0===t||t,r=e.loop,a=e.onDone,o=e.onLoaded,s=e.src,i=e.volume,u=Object(c.useRef)(null);return Object(c.useEffect)((function(){i&&(u.current.volume=i)}),[u,i]),Object(F.jsx)("audio",{src:s,ref:u,autoPlay:n,controls:!1,loop:Boolean(r),onEnded:function(){return a&&a()},onCanPlayThrough:function(){return o&&o()}})},Yt=function(){var e=Object(l.c)(g.music),t=Object(l.c)(g.musicVolume),n=Object(l.c)(g.musicType);return Object(F.jsx)(F.Fragment,{children:e&&Object(F.jsx)(Jt,{src:H[n],volume:t/100,loop:!0})})},qt=function(e){var t=e.sources,n=e.onLoaded,r=Object(c.useMemo)((function(){var e=t.map((function(e){return[e,!1]}));return new Map(e)}),[t]),a=Object(c.useCallback)((function(e){r.set(e,!0),Array.from(r.values()).every((function(e){return e}))&&n()}),[r,n]);return Object(F.jsx)(F.Fragment,{children:Array.from(r.keys()).map((function(e){return Object(F.jsx)(Jt,{src:e,autoPlay:!1,onLoaded:function(){return a(e)}},e)}))})},Qt=function(e){var t=e.onLoaded,n=e.className,r=Object(l.c)(g.musicType),a=Object(c.useMemo)((function(){return[].concat(Object(w.a)(V),[H[r]])}),[r]);return Object(F.jsxs)("div",{"data-testid":"game-loader",className:Ve()(n,"flex font-mono items-center justify-center text-2xl"),children:["Loading",Object(F.jsx)(qt,{sources:a,onLoaded:t})]})},Xt=function(){var e=Object(l.c)(g.sound),t=Object(l.c)(g.soundVolume),n=Object(l.c)(m.soundTracks),r=Ge();return Object(F.jsx)(F.Fragment,{children:e&&n.map((function(e){var n=e.id,c=e.src;return Object(F.jsx)(Jt,{src:c,volume:t/100,onDone:function(){return r(Le.soundTrack(n))}},n)}))})},$t=function(e){var t=e.message,n=e.className;return Object(F.jsx)("div",{"data-testid":"game-toast",className:Ve()(n,"flex font-mono items-center justify-center text-4xl"),children:t})},en=function(e){var t=e.className,n=Object(c.useState)(!1),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(!1),i=Object(f.a)(s,2),u=i[0],d=i[1],j=Ge(),b=function(){var e=function(){return"visible"===document.visibilityState},t=Object(c.useState)(e()),n=Object(f.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t=function(){return a(e())};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}),[]),r}(),O=Object(l.c)(m.starting),p=Object(l.c)(m.running),v=Object(l.c)(m.finishing),x=Object(l.c)(m.restartTicker),h=Object(l.c)(m.toastMessage),g=Object(l.c)(m.speed);Object(c.useEffect)((function(){if(h){d(!0);var e=setTimeout((function(){d(!1)}),1e3);return function(){d(!1),clearTimeout(e)}}}),[h]),Object(c.useEffect)((function(){b||j(Le.pause())}),[b,j]);var y=et().transparent;return Object(F.jsxs)("div",{className:Ve()(t,"flex relative overflow-hidden desktop:p-4 w-full",{"border border-gray-200 dark:border-gray-600 rounded-lg":y,"dark:nm-inset-gray-800 nm-inset-gray-100":!y}),children:[Object(F.jsx)(Kt,{}),p&&Object(F.jsx)(Yt,{}),Object(F.jsx)(Xt,{}),O&&!a&&Object(F.jsx)(Qt,{className:"absolute w-full h-full -m-4",onLoaded:function(){return o(!0)}}),O&&a&&Object(F.jsx)(Zt,{className:"absolute w-full h-full -m-4",onStart:function(){return j(Le.run())}}),u&&Object(F.jsx)($t,{className:"absolute w-full h-full -m-4",message:h}),p&&[x].map((function(e){return Object(F.jsx)(Vt,{speed:g,onTick:function(){return j(Le.tick())}},e)})),v&&Object(F.jsx)(Vt,{speed:50,onTick:function(){return j(Le.finishing())}})]})},tn=function(e){var t=e.label,n=e.primary,r=e.value;return Object(F.jsx)(Ct,{label:t,children:Object(F.jsx)(ct,{className:"text-[1.25rem] h-[1.9rem] sm:text-2xl sm:h-[2.5rem]",digits:7,primary:n,value:r})})},nn=function(e){var t=e.className,n=Object(l.c)(m.score),r=Object(l.c)(m.level),c=Object(l.c)(m.lines);return Object(F.jsxs)("div",{className:Ve()(t,"flex"),children:[Object(F.jsx)(tn,{label:"Score",value:n}),Object(F.jsx)(tn,{label:"Level",value:r,primary:!1}),Object(F.jsx)(tn,{label:"Lines",value:c,primary:!1})]})},rn=function(e){var t=e.floatControls;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"grid grid-cols-desktop gap-4 m-auto",children:[Object(F.jsxs)("div",{className:"flex flex-col",children:[Object(F.jsx)(Et,{className:"p-4",label:"Hold",selectPieces:m.hold}),Object(F.jsx)(nn,{className:"flex-col mt-auto gap-4"})]}),Object(F.jsx)(en,{}),Object(F.jsx)(Et,{className:"p-4",label:"Next",selectPieces:m.next}),!t&&Object(F.jsx)(zt,{className:"col-start-2 mt-5"})]}),t&&Object(F.jsx)("div",{className:"flex absolute bottom-0 mb-5 w-full",children:Object(F.jsx)("div",{className:"grid grid-cols-desktop gap-4 mx-auto",children:Object(F.jsx)(zt,{className:"col-start-2",transparent:!0})})})]})},cn=function(){return Object(F.jsxs)("div",{className:"flex flex-col p-4",children:[Object(F.jsx)(nn,{className:"mx-auto gap-2"}),Object(F.jsxs)("div",{className:"grid grid-cols-mobile gap-2 mx-auto",children:[Object(F.jsx)("div",{className:"flex flex-col",children:Object(F.jsx)(Et,{className:"p-1",label:"Hold",selectPieces:m.hold})}),Object(F.jsx)(en,{}),Object(F.jsx)("div",{className:"flex flex-col",children:Object(F.jsx)(Et,{className:"p-1",label:"Next",selectPieces:m.next})})]}),Object(F.jsx)("div",{className:"flex absolute bottom-4 left-4 right-4",children:Object(F.jsx)(zt,{className:"w-full",transparent:!0})})]})},an=te.a.mark(fn),on=te.a.mark(jn),sn=te.a.mark(bn),un=te.a.mark(mn),ln=te.a.mark(On),dn=["text-tetro_i-400","text-tetro_o-400","text-tetro_t-400","text-tetro_s-400","text-tetro_z-400","text-tetro_j-400","text-tetro_l-400"];function fn(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(dn,"t0",1);case 1:case"end":return e.stop()}}),an)}function jn(e){var t;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=9;break}return n.next=4,"dark:text-gray-200 text-gray-300";case 4:return n.next=6,"dark:text-gray-600 text-gray-800";case 6:t++,n.next=1;break;case 9:case"end":return n.stop()}}),on)}function bn(e){var t;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,dn[X(dn.length)];case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),sn)}function mn(e,t,n){var r,c,a,o;return te.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=dn.map((function(e){return[e,e,e]})).flat(),c=e,a=e+t,o=n?c:a;case 4:if(!(n?o<a:o>c)){s.next=10;break}return s.next=7,r[o%r.length];case 7:n?o++:o--,s.next=4;break;case 10:case"end":return s.stop()}}),un)}function On(e,t){return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(fn(),"t0",2);case 2:return n.delegateYield(bn(10),"t1",3);case 3:return n.delegateYield(mn(e,t,!0),"t2",4);case 4:return n.delegateYield(jn(2),"t3",5);case 5:return n.delegateYield(mn(e,t,!1),"t4",6);case 6:n.next=0;break;case 8:case"end":return n.stop()}}),ln)}var pn=function(e){return e.map((function(e){return e.color.next().value}))},vn=function(e,t){var n=Object(c.useState)([]),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return function(e){return Array.from(e).map((function(t,n){return{char:t,key:n,color:On(n,e.length)}}))}(e)}),[e]);return Object(c.useEffect)((function(){return o(pn(s))}),[s]),Bt((function(){return o(pn(s))}),t,[s]),[s,a]},xn=function(e){var t=e.name,n=e.speed,r=void 0===n?200:n,c=e.className,a=vn(t,r),o=Object(f.a)(a,2),s=o[0],i=o[1];return Object(F.jsxs)("div",{"data-testid":"app-logo",className:Ve()("flex flex-col items-center",c),children:[Object(F.jsx)("div",{className:"font-mono text-2xl",children:"welcome to"}),Object(F.jsx)("div",{className:"flex text-4xl font-logo font-bold",children:s.map((function(e){var t=e.key,n=e.char;return Object(F.jsx)("div",{"data-testid":"app-logo-".concat(t),className:i[t],children:n},t)}))})]})},hn=function(e){var t=e.selectStart,n=void 0===t?g.startLevel:t,r=Object(l.c)(n),a=Object(c.useMemo)((function(){return[{title:"New Game",action:Le.start(r),active:!0},{title:"Level: ".concat(r),action:k.startLevel()},{title:"High Scores",action:k.open(v.HIGH_SCORES)},{title:"Options",action:k.open(v.OPTIONS)},{title:"Credits",action:k.open(v.CREDITS)}]}),[r]);return Object(F.jsxs)("div",{className:"flex flex-col h-full",children:[Object(F.jsx)(xn,{className:"mt-auto mb-14",name:d.brandName.toUpperCase()}),Object(F.jsx)(kt,{className:"w-44 ml-auto mr-auto",items:a}),Object(F.jsx)(ft,{className:"ml-auto mr-auto mt-5 mb-auto"})]})},gn=function(){var e,t=Object(l.c)(m.welcoming),n=Object(u.a)("(min-width:600px)"),r=Object(u.a)("(max-height:850px)"),a=Object(u.a)("(max-width:380px)");e="/",Object(c.useEffect)((function(){i.a.pageview(e)}),[e]),function(e){var t=Object(l.c)(g.persist),n=Ge();Object(c.useEffect)((function(){var t=localStorage.getItem(e);if(t)try{var r=JSON.parse(t);(null===r||void 0===r?void 0:r.version)===N&&n(k.persist(r))}catch(c){console.error("Could not read persist data.",c)}}),[e,n]),Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t))}),[e,t])}(d.storageKey),function(){var e=Object(l.c)(m.status),t=Object(c.useMemo)((function(){return"".concat(wt[e]," | ").concat(d.brandName)}),[e]);Object(c.useEffect)((function(){document.title=t}),[t])}();var o=Object(c.useMemo)((function(){return Object(F.jsx)(tt,{transparent:!n,large:!n&&!a,children:n?Object(F.jsx)(rn,{floatControls:r}):Object(F.jsx)(cn,{})})}),[n,r,a]);return Object(F.jsxs)("div",{className:"flex flex-col w-full h-full",children:[t?Object(F.jsx)(hn,{}):o,Object(F.jsx)(_t,{}),Object(F.jsx)(st,{}),Object(F.jsx)(ut,{}),Object(F.jsx)(Nt,{}),Object(F.jsx)(Ye,{})]})},yn=n(109),Nn=function(e){var t=e.children;return function(){var e=Object(l.c)(g.dark);Object(c.useEffect)((function(){var t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}),[e])}(),Object(F.jsx)(yn.b,{injectFirst:!0,children:t})},kn=function(e){var t=e.children,n=Object(c.useMemo)((function(){return Ue()}),[]);return Object(F.jsx)(l.a,{store:n,children:Object(F.jsx)(Nn,{children:t})})},_n=(n(85),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))});d.analytics&&i.a.initialize(d.analytics),s.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(kn,{children:Object(F.jsx)(gn,{})})}),document.getElementById("root")),_n()}},[[86,1,2]]]);
//# sourceMappingURL=main.975e2952.chunk.js.map