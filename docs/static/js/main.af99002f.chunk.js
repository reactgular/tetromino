(this.webpackJsonptetromino=this.webpackJsonptetromino||[]).push([[0],{79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n.n(c),o=n(13),s=n.n(o),i=n(104),u=n(4),l={brandName:"Tetromino",github:"https://github.com/reactgular/tetromino",storageKey:"tetromino",version:"1.0.0"},d=n(7),f=n(44),j=function(e){return e};!function(e){e.WELCOME="welcome",e.STARTING="starting",e.RUNNING="running",e.PAUSED="paused",e.FINISHING="finishing",e.FINISHED="finished"}(r||(r={}));var b,m={buffer:{rows:[],width:0,height:0},restart_ticker:0,fast_speed:25,level:1,lines_total:0,lines_level:0,lines_level_up:1,hold_enable:!0,next:[void 0,void 0,void 0],next_max:3,player_freeze:!1,repeat_speed:100,score:0,screen:[],soft_drop:!1,sound_id:1,sound_tracks:[],status:r.WELCOME},O="game";!function(e){var t=e.game=Object(f.a)(j,(function(e){return e.game})),n=Object(f.a)(t,(function(e){return e.buffer})),c=Object(f.a)(t,(function(e){return e.screen})),a=e.status=Object(f.a)(t,(function(e){return e.status})),o=(e.welcoming=Object(f.a)(a,(function(e){return e===r.WELCOME})),e.finishing=Object(f.a)(a,(function(e){return e===r.FINISHING})),e.finished=Object(f.a)(a,(function(e){return e===r.FINISHED})),e.paused=Object(f.a)(a,(function(e){return e===r.PAUSED})),e.starting=Object(f.a)(a,(function(e){return e===r.STARTING})),e.running=Object(f.a)(a,(function(e){return e===r.RUNNING})),e.level=Object(f.a)(t,(function(e){return e.level})),e.lines=Object(f.a)(t,(function(e){return e.lines_total+e.lines_level})),e.restartTicker=Object(f.a)(t,(function(e){return e.restart_ticker})),e.score=Object(f.a)(t,(function(e){return e.score})),e.next=Object(f.a)(t,(function(e){return e.next})),e.hold=Object(f.a)(t,(function(e){return e.hold?[e.hold]:[void 0]})),e.holdEnabled=Object(f.a)(t,(function(e){return e.hold_enable})),e.repeatSpeed=Object(f.a)(t,(function(e){return e.repeat_speed})),e.screenCell=function(e){return Object(f.a)(c,(function(t){return t[e]}))},e.speed=Object(f.a)(t,(function(e){if(e.soft_drop&&e.player)return e.fast_speed;var t=500-20*e.level;return Math.max(e.fast_speed,t)})),e.size=Object(f.a)(n,(function(e){return[e.width,e.height]})));e.aspectRatio=Object(f.a)(o,(function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return"".concat(n/r," / 0.9")})),e.soundTracks=Object(f.a)(t,(function(e){return e.sound_tracks})),e.toastMessage=Object(f.a)(t,(function(e){return e.toast_message}))}(b||(b={}));var p,v=["left","right","rotate_left","rotate_right","soft_drop","hard_drop","hold"],x={left:"Move Left",right:"Move Right",rotate_left:"Rotate Left",rotate_right:"Rotate Right",soft_drop:"Soft Drop",hard_drop:"Hard Drop",hold:"Hold"};!function(e){e.OPTIONS="options",e.HIGH_SCORES="high_scores",e.CREDITS="credits"}(p||(p={}));var h,g={dark:!1,ghost_piece:!0,high_scores:[],music:!0,music_type:0,music_volume:80,sound:!0,sound_volume:80,start_level:1,keys:{right:"ArrowRight",left:"ArrowLeft",rotate_left:"ArrowUp",rotate_right:"KeyZ",soft_drop:"ArrowDown",hard_drop:"Space",hold:"KeyC"}},y=l.version;!function(e){var t=e.app=Object(f.a)(j,(function(e){return e.app})),n=e.dark=Object(f.a)(t,(function(e){return Boolean(e.dark)})),r=e.highScores=Object(f.a)(t,(function(e){return e.high_scores})),c=e.ghostPiece=Object(f.a)(t,(function(e){return e.ghost_piece})),a=e.music=Object(f.a)(t,(function(e){return Boolean(e.music)})),o=e.musicType=Object(f.a)(t,(function(e){return e.music_type})),s=e.musicVolume=Object(f.a)(t,(function(e){return e.music_volume})),i=e.sound=Object(f.a)(t,(function(e){return Boolean(e.sound)})),u=e.soundVolume=Object(f.a)(t,(function(e){return e.sound_volume})),d=e.dialog=Object(f.a)(t,(function(e){return e.dialog})),b=(e.isOpen=function(e){return Object(f.a)(d,(function(t){return t===e}))},e.startLevel=Object(f.a)(t,(function(e){return e.start_level}))),m=e.keys=Object(f.a)(t,(function(e){return e.keys}));e.persist=Object(f.a)(n,c,b,i,u,a,s,o,r,m,(function(e,t,n,r,c,a,o,s,i,u){return{version:l.version,dark:e,ghost_piece:t,start_level:n,sound:r,sound_volume:c,music:a,music_volume:o,music_type:s,high_scores:i,keys:u}}))}(h||(h={}));var N,k,_=n(20),C=n(6),w=n(11),S=function(e){var t=e.getState;return function(e){return function(n){return e(Object(w.a)(Object(w.a)({},n),{},{snapshot:t()}))}}},T=n(23),R={log:console.log,error:console.error,debug:console.debug},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",n=R[t]||console[t];return n.bind(console,"".concat(e,":"))},M=n(33),I=n(53);!function(e){var t=function(e){return"".concat("app","/").concat(e)};e.dark=Object(C.b)(t("dark")),e.ghostPiece=Object(C.b)(t("ghost_piece")),e.music=Object(C.b)(t("music")),e.musicType=Object(C.b)(t("music_type")),e.musicVolume=Object(C.b)(t("music_volume")),e.sound=Object(C.b)(t("sound")),e.soundVolume=Object(C.b)(t("sound_volume")),e.open=Object(C.b)(t("open")),e.close=Object(C.b)(t("close")),e.startLevel=Object(C.b)(t("start_level")),e.recordScore=Object(C.b)(t("record_score")),e.resetScore=Object(C.b)(t("reset_store")),e.resetOptions=Object(C.b)(t("reset_options")),e.keys=Object(C.b)(t("keys")),e.persist=Object(C.b)(t("persist"))}(N||(N={})),(k||(k={})).slice=Object(C.c)({name:"app",initialState:g,reducers:{},extraReducers:function(e){e.addCase(N.dark,(function(e,t){var n=t.payload;e.dark=void 0===n?!e.dark:Boolean(n)})).addCase(N.ghostPiece,(function(e,t){var n=t.payload;e.ghost_piece=void 0===n?!e.ghost_piece:Boolean(n)})).addCase(N.music,(function(e,t){var n=t.payload;e.music=void 0===n?!e.music:Boolean(n)})).addCase(N.musicVolume,(function(e,t){var n=t.payload;e.music_volume=n})).addCase(N.musicType,(function(e,t){var n=t.payload;e.music_type=n})).addCase(N.sound,(function(e,t){var n=t.payload;e.sound=void 0===n?!e.sound:Boolean(n)})).addCase(N.soundVolume,(function(e,t){var n=t.payload;e.sound_volume=n})).addCase(N.keys,(function(e,t){var n,r=t.payload,c=Object(I.a)(v);try{for(c.s();!(n=c.n()).done;){var a=n.value;if(e.keys[a]===r.code){e.keys[a]="";break}}}catch(o){c.e(o)}finally{c.f()}e.keys[r.keyOf]=r.code})).addCase(N.open,(function(e,t){var n=t.payload;e.dialog=n})).addCase(N.close,(function(e){e.dialog=void 0})).addCase(N.startLevel,(function(e,t){var n=t.payload;void 0===n?1===e.start_level?e.start_level=5:e.start_level=e.start_level<25?e.start_level+5:1:e.start_level=Math.max(1,Math.min(n,25))})).addCase(N.recordScore,(function(e,t){var n=t.payload,r=Array.from(new Set([].concat(Object(_.a)(e.high_scores),[n])));r.sort((function(e,t){return e-t})),e.high_scores=r.reverse().slice(0,9)})).addCase(N.resetScore,(function(e){e.high_scores=[]})).addCase(N.resetOptions,(function(e){var t=e.dark,n=e.dialog,r=e.high_scores;return Object(w.a)(Object(w.a)({},g),{},{dark:t,dialog:n,high_scores:r})})).addCase(N.persist,(function(e,t){var n=t.payload,r=n.version,c=Object(M.a)(n,["version"]);if(r===l.version)return Object(w.a)(Object(w.a)({},e),c)}))}});var L,P=n(10),D=n(1),F=["/tetromino/audio/music/bonkers-for-arcades.mp3","/tetromino/audio/music/the-ice-cream-man.mp3","/tetromino/audio/music/8-bit-perplexion.mp3","/tetromino/audio/music/its-raining-pixels.mp3","/tetromino/audio/music/arcade-puzzler.mp3"],H="/tetromino/audio/sounds/power-down-13.mp3",A="/tetromino/audio/sounds/retro-chip-power.mp3",G="/tetromino/audio/sounds/ui-quirky-19.mp3",U="/tetromino/audio/sounds/zapsplat_bambo_swoosh.mp3",B="/tetromino/audio/sounds/zapsplat_level_up.mp3",z=[H,A,G,U,B],V=Array(11).fill(null).map((function(e,t){return 10*t})).map((function(e){return{label:"".concat(e,"%"),value:e}})),K=F.map((function(e,t){return{label:"Type ".concat(t+1),value:t}})),W={true:Object(D.jsx)(P.p,{}),false:Object(D.jsx)(P.o,{})},J={true:"Turn sound off",false:"Turn sound on"},Y={true:Object(D.jsx)(P.l,{}),false:Object(D.jsx)(P.o,{})},Z={true:"Turn music off",false:"Turn music on"};!function(e){e.I="i",e.O="o",e.T="t",e.S="s",e.Z="z",e.J="j",e.L="l"}(L||(L={}));var q=Object.values(L),Q=function(e){return Math.floor(Math.random()*e)},X=function(){return q[Q(q.length)]},$=n(12),ee=n.n($),te=ee.a.mark(ne);function ne(e){var t;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,{};case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),te)}var re=ee.a.mark(ce);function ce(e,t){var n;return ee.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;case 1:if(!(n<t)){r.next=7;break}return r.next=4,{cells:Array.from(ne(e))};case 4:n++,r.next=1;break;case 7:case"end":return r.stop()}}),re)}function ae(e,t,n){var r=e.width,c=e.height;return t<0||t>=r||n<0||n>=c}function oe(e,t,n){return void 0!==e.rows[n].cells[t].type}function se(e,t){for(var n=e.x,r=e.y,c=e.piece,a=0;a<c.length;a++){var o=Object(d.a)(c[a],2),s=n+o[0],i=r+o[1];if(ae(t,s,i)||oe(t,s,i))return!0}return!1}var ie,ue,le,de,fe=n(9),je=(ie={},Object(fe.a)(ie,L.O,[[[-1,0],[0,0],[-1,1],[0,1]]]),Object(fe.a)(ie,L.I,[[[-2,0],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[0,1],[0,2]]]),Object(fe.a)(ie,L.S,[[[0,-1],[0,0],[1,0],[1,1]],[[0,0],[1,0],[-1,1],[0,1]]]),Object(fe.a)(ie,L.Z,[[[1,-1],[0,0],[1,0],[0,1]],[[-1,0],[0,0],[0,1],[1,1]]]),Object(fe.a)(ie,L.L,[[[1,-1],[-1,0],[0,0],[1,0]],[[-1,-1],[0,-1],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[-1,1]],[[0,-1],[0,0],[0,1],[1,1]]]),Object(fe.a)(ie,L.J,[[[-1,-1],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,0],[1,1]],[[0,-1],[1,-1],[0,0],[0,1]]]),Object(fe.a)(ie,L.T,[[[0,-1],[-1,0],[0,0],[1,0]],[[0,-1],[-1,0],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[0,1]],[[0,-1],[0,0],[1,0],[0,1]]]),ie);function be(e,t){for(var n=e.x,r=e.y,c=e.type,a=e.rotate,o=je[c][a],s=new Set,i=0;i<o.length;i++){var u=Object(d.a)(o[i],2),l=u[0],f=u[1],j=t.rows[r+f];j.cells[n+l]={type:c},s.add(j)}var b=0;return s.forEach((function(e){e.cells.every((function(e){return Boolean(e.type)}))&&(e.removed=!0,b++)})),b}function me(e,t,n,r){var c=ge(t,n,r);se(c,e)||(t.rotate=c.rotate,t.x=c.x,t.y=c.y)}!function(e){e.LEFT="left",e.RIGHT="right"}(de||(de={}));var Oe=function(e){var t=Object(d.a)(e,2);return[t[0],t[1]+1]},pe=function(e){return e},ve=function(e,t){return t},xe=(ue={},Object(fe.a)(ue,de.LEFT,(function(e){var t=Object(d.a)(e,2);return[t[0]-1,t[1]]})),Object(fe.a)(ue,de.RIGHT,(function(e){var t=Object(d.a)(e,2);return[t[0]+1,t[1]]})),ue),he=(le={},Object(fe.a)(le,de.LEFT,(function(e,t){return t===e.length-1?0:t+1})),Object(fe.a)(le,de.RIGHT,(function(e,t){return 0===t?e.length-1:t-1})),le);function ge(e,t,n){var r=e.x,c=e.y,a=e.type,o=e.rotate,s=je[a],i=n(s,o),u=t([r,c]),l=Object(d.a)(u,2);return{x:l[0],y:l[1],piece:s[i],rotate:i}}var ye=function(e,t){for(var n,r=t.x,c=t.y,a=t.type,o=t.rotate;;){var s,i,u=ge({x:(null===(s=n)||void 0===s?void 0:s.x)||r,y:(null===(i=n)||void 0===i?void 0:i.y)||c,type:a,rotate:o},Oe,ve);if(se(u,e))return n;n={x:u.x,y:u.y}}},Ne=function(e){var t,n,r,c=(t=10,n=20,{rows:Array.from(ce(t,n)),width:t,height:n});return Object(w.a)(Object(w.a)({},m),{},{next:(r=e,Array(r).fill(null).map(X)),buffer:c,screen:Array(c.width*c.height).fill({}),level:1,score:0,player:void 0,ghost:void 0})},ke={1:function(e){return 40},2:function(e){return 100},3:function(e){return 300},4:function(e){return 1200}},_e={1:function(e){return 80},2:function(e){return 200},3:function(e){return 600},4:function(e){return 2400}},Ce={1:function(e){return 120},2:function(e){return 300},3:function(e){return 900},4:function(e){return 3600}},we={1:function(e){return 40*(e+1)},2:function(e){return 100*(e+1)},3:function(e){return 300*(e+1)},4:function(e){return 1200*(e+1)}},Se=function(e,t,n){return function(e,t){if(0!==t){if(1===e)return ke[t](e);if(2===e)return _e[t](e);if(e>=3&&e<10)return Ce[t](e);if(e>=10)return we[t](e)}return 0}(e,n)+je[t][0].length},Te=ee.a.mark(Re);function Re(e){var t,n,r,c,a,o,s,i;return ee.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=e.rows,n=e.width,r=e.height,c=0;case 2:if(!(c<r)){u.next=14;break}a=t[c],o=a.cells,s=a.removed,i=0;case 5:if(!(i<n)){u.next=11;break}return u.next=8,{type:o[i].type,glow:s};case 8:i++,u.next=5;break;case 11:c++,u.next=2;break;case 14:case"end":return u.stop()}}),Te)}function Ee(e,t,n,r){var c=e.width,a=Array.from(Re(e));if(t){var o=Me(a,c,(function(e){e.type=t.type,e.ghost=.2})),s=Me(a,c,(function(e){e.type=t.type,e.ghost=void 0})),i=t.y-r,u=Me(a,c,(function(e,n,c){e.type||(e.type=t.type,e.ghost=(.2-.05)*function(e){return(e-r)/i}(c)+.05)}));je[t.type][t.rotate].forEach((function(e){var c=Object(d.a)(e,2),a=c[0],i=c[1];if(n&&o(n.x+a,n.y+i),s(t.x+a,t.y+i),void 0!==r)for(var l=r;l<t.y;l++)u(t.x+a,l+i)}))}return a}function Me(e,t,n){return function(r,c){n(e[c*t+r],r,c)}}var Ie,Le,Pe=function(e,t){e.sound_tracks.push({id:e.sound_id++,src:t})};function De(e){var t=e.rows.findIndex((function(e){return e.removed}));return-1!==t&&(function(e,t){var n=e.rows,r=e.width;n.splice(t,1),n.unshift({cells:Array.from(ne(r))})}(e,t),!0)}!function(e){var t=function(e){return"".concat(O,"/").concat(e)};e.level=Object(C.b)(t("level")),e.softDrop=Object(C.b)(t("soft_drop")),e.hardDrop=Object(C.b)(t("hard_drop")),e.start=Object(C.b)(t("start")),e.run=Object(C.b)(t("run")),e.pause=Object(C.b)(t("pause")),e.resume=Object(C.b)(t("resume")),e.quit=Object(C.b)(t("quit")),e.tick=Object(C.b)(t("tick")),e.finishing=Object(C.b)(t("finishing")),e.render=Object(C.b)(t("render")),e.bufferSet=Object(C.b)(t("bufferSet")),e.bufferPatch=Object(C.b)(t("bufferPatch")),e.patch=Object(C.b)(t("patch")),e.rotate=Object(C.b)(t("rotate")),e.move=Object(C.b)(t("move")),e.hold=Object(C.b)(t("hold")),e.soundTrack=Object(C.b)(t("soundTrack")),e.toast=Object(C.b)(t("toast"))}(Ie||(Ie={})),(Le||(Le={})).slice=Object(C.c)({name:O,initialState:m,reducers:{},extraReducers:function(e){e.addCase(Ie.level,(function(e,t){var n=t.payload;e.level=n})).addCase(Ie.softDrop,(function(e,t){var n=t.payload;e.soft_drop=n})).addCase(Ie.start,(function(e,t){var n=t.payload,c=Ne(e.next_max);return Object(w.a)(Object(w.a)({},c),{},{level:n,status:r.STARTING})})).addCase(Ie.run,(function(e,t){e.status=r.RUNNING})).addCase(Ie.pause,(function(e,t){e.status=r.PAUSED})).addCase(Ie.resume,(function(e,t){e.status=r.STARTING})).addCase(Ie.quit,(function(e){return Ne(e.next_max)})).addCase(Ie.render,(function(e,t){e.screen=Ee(e.buffer,e.player,e.ghost)})).addCase(Ie.tick,(function(e,t){var n=t.snapshot;if(e.player){var c=function(e,t){var n=ge(t,Oe,ve);return se(n,e)?{collision:!0,lines:be(t,e)}:(t.y=n.y,{collision:!1})}(e.buffer,e.player),a=c.collision,o=c.lines;if(a){var s=e.level,i=function(e,t,n){return e.score=e.score+Se(e.level,t,n),e.lines_level=e.lines_level+n,e.lines_level>=e.lines_level_up?(e.lines_total+=e.lines_level,e.lines_level=0,e.level++,A):e.player_freeze?void 0:G}(e,e.player.type,o);s!==e.level&&e.level%5===0&&(e.toast_message="Level ".concat(e.level),(null===n||void 0===n?void 0:n.app.sound)&&Pe(e,B)),(null===n||void 0===n?void 0:n.app.sound)&&i&&Pe(e,i),e.player_freeze=!1,e.hold_enable=!0,e.player=void 0,e.ghost=void 0}else e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?ye(e.buffer,e.player):void 0}else if(!De(e.buffer)){var u=e.next.shift();e.next.length<e.next_max&&e.next.push(X());var l=function(e,t){var n=je[e][0].some((function(e){var t=Object(d.a)(e,2);return t[0],t[1]<0}))?1:0;return{x:Math.floor(t/2),y:n,type:e,rotate:0}}(u,e.buffer.width);se(ge(l,pe,ve),e.buffer)?((null===n||void 0===n?void 0:n.app.sound)&&Pe(e,H),e.restart_ticker++,e.status=r.FINISHING):(e.player=l,e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?ye(e.buffer,l):void 0)}e.screen=Ee(e.buffer,e.player,e.ghost)})).addCase(Ie.finishing,(function(e,t){t.snapshot;var n=e.buffer.rows.find((function(e){return e.removed}));if(n)e.score+=n.cells.filter((function(e){return Boolean(e.type)})).length,De(e.buffer);else{var c=e.buffer.rows.find((function(e){return e.cells.some((function(e){return Boolean(e.type)}))}));c?c.removed=!0:e.status=r.FINISHED}e.screen=Ee(e.buffer,e.player,e.ghost)})).addCase(Ie.hardDrop,(function(e,t){var n=t.snapshot;if(e.player&&!e.player_freeze){var r=e.player.y;!function(e,t){for(;;){var n=ge(t,Oe,ve);if(se(n,e))break;t.y=n.y}}(e.buffer,e.player),e.restart_ticker++,e.screen=Ee(e.buffer,e.player,void 0,r),e.player_freeze=!0,e.ghost=void 0,(null===n||void 0===n?void 0:n.app.sound)&&(Pe(e,U),Pe(e,G))}})).addCase(Ie.bufferSet,(function(e,t){var n=t.payload;e.buffer=n})).addCase(Ie.bufferPatch,(function(e,t){t.payload.forEach((function(t){return function(e,t){var n=t.x,r=t.y,c=Object(M.a)(t,["x","y"]);e.rows[r].cells[n]=c}(e.buffer,t)}))})).addCase(Ie.rotate,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(me(e.buffer,e.player,pe,he[n]),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?ye(e.buffer,e.player):void 0,e.screen=Ee(e.buffer,e.player,e.ghost))})).addCase(Ie.move,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(me(e.buffer,e.player,xe[n],ve),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?ye(e.buffer,e.player):void 0,e.screen=Ee(e.buffer,e.player,e.ghost))})).addCase(Ie.hold,(function(e){e.player&&(e.hold&&(e.next=[e.hold].concat(Object(_.a)(e.next))),e.hold=e.player.type,e.hold_enable=!1,e.player=void 0,e.ghost=void 0,e.restart_ticker++,e.screen=Ee(e.buffer,e.player,e.ghost))})).addCase(Ie.soundTrack,(function(e,t){var n=t.payload;e.sound_tracks=e.sound_tracks.filter((function(e){return e.id!==n}))})).addCase(Ie.patch,(function(e,t){var n=t.payload,r=t.snapshot,c=(null===r||void 0===r?void 0:r.app.ghost_piece)&&e.player?ye(e.buffer,e.player):void 0,a=Ee(e.buffer,e.player,c);return Object(w.a)(Object(w.a)(Object(w.a)({},e),n),{},{ghost:c,screen:a})}))}});var Fe=function(){return Object(T.b)({app:k.slice.reducer,game:Le.slice.reducer})};var He,Ae=function(){return Object(u.b)()},Ge=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Fe();return Object(C.a)({devTools:{name:l.brandName,maxAge:100},preloadedState:e,reducer:t,middleware:function(e){return[].concat(Object(_.a)(e()),[S])}})}(e)},Ue=n(107),Be=n(5),ze=n.n(Be),Ve=(n(79),function(e){var t=e.onClose,n=void 0===t?function(){return null}:t,r=e.open,a=e.title,o=e.large,s=e.children,u=e.className,l=Object(i.a)("(max-width:375px)"),d=Object(c.useMemo)((function(){return o&&l}),[o,l]);return Object(D.jsxs)(Ue.a,{className:ze()("ui-dialog",{fullScreen:d}),PaperProps:{className:ze()("ui-dialog-paper",u,{"border-primary":!d,fullScreen:d})},open:r,onClose:n,fullScreen:d,children:[Object(D.jsxs)("div",{className:"ui-dialog-title text-primary",children:[a,o&&Object(D.jsx)("button",{className:"ml:hidden flex absolute top-0 -left-3 p-3 dark:text-white text-black text-sm",onClick:n,children:Object(D.jsx)(P.a,{})})]}),Object(D.jsx)("div",{className:"flex flex-col",children:s})]})}),Ke=function(e){var t=e.closeAction,n=void 0===t?N.close():t,r=e.selectOpen,c=e.title,a=e.large,o=e.children,s=e.className,i=Ae(),l=Object(u.c)(r);return Object(D.jsx)(Ve,{className:s,open:Boolean(l),title:c,large:a,onClose:function(){return i(n)},children:o})},We=function(e){var t=e.credits,n=e.className;return Object(D.jsx)("div",{className:ze()(n,"flex flex-col text-xs -mb-3"),children:t.map((function(e,t){var n=e.title,r=e.desc,c=e.url;return Object(D.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(D.jsxs)("div",{children:[n,":"]}),Object(D.jsx)("a",{href:c,className:"text-primary hover:underline",children:r})]},t)}))})},Je=[{title:"UX Design by",desc:"Zayn Assalam",url:"https://dribbble.com/shots/14684127-Tetris-Mobile-App"},{title:"Programmed by",desc:"Nick Foscarini",url:"https://www.linkedin.com/in/nick-foscarini/"},{title:"Built with",desc:"ReactJS",url:"https://reactjs.org/"},{title:"States managed by",desc:"Redux Toolkit",url:"https://redux-toolkit.js.org/"},{title:"Styled with",desc:"tailwindcss",url:"https://tailwindcss.com/"},{title:"Source code",desc:"GitHub",url:l.github}],Ye=function(e){var t=e.selectOpen,n=void 0===t?h.isOpen(p.CREDITS):t;return Object(D.jsx)(Ke,{className:"max-w-[12rem]",title:"Credits",selectOpen:n,children:Object(D.jsx)(We,{credits:Je})})},Ze=n(60),qe=n(59),Qe=n(109),Xe=Object(c.createContext)({transparent:!1,large:!1}),$e=function(){return Object(c.useContext)(Xe)},et=function(e){var t=e.transparent,n=e.large,r=e.children,a=Object(c.useMemo)((function(){return{transparent:t,large:n}}),[t,n]);return Object(D.jsx)(Xe.Provider,{value:a,children:r})};n(80);!function(e){e[e.NORMAL=0]="NORMAL",e[e.ROUND=1]="ROUND",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN"}(He||(He={}));var tt=function(e){var t=e.active,n=e.preventFocus,r=e.primary,a=e.secondary,o=e.toolTip,s=e.shape,i=void 0===s?He.NORMAL:s,u=e.className,l=e.children,d=(e.onMouseDown,e.onMouseUp,e.onPress),f=e.onRelease,j=Object(M.a)(e,["active","preventFocus","primary","secondary","toolTip","shape","className","children","onMouseDown","onMouseUp","onPress","onRelease"]),b=Object(c.useRef)(!1),m=$e().transparent,O=Object(c.useMemo)((function(){return ze()(u,"ui-button",{"ui-button-standard":!m,"ui-button-trans":m,"ui-shape-round":i===He.ROUND,"ui-shape-normal":i===He.NORMAL,"ui-shape-left":i===He.LEFT,"ui-shape-right":i===He.RIGHT,"ui-shape-up":i===He.UP,"ui-shape-down":i===He.DOWN,"text-primary":r,"text-secondary":a,active:t})}),[t,r,a,i,m,u]);return Object(D.jsx)(Qe.a,{title:o||"",children:Object(D.jsx)("button",Object(w.a)(Object(w.a)({className:O,onTouchStart:function(){b.current=!0,d&&d()},onTouchEnd:function(){f&&f()},onMouseDown:function(e){n&&e.preventDefault(),!b.current&&d&&d()},onMouseUp:function(e){!b.current&&f&&f()}},j),{},{children:l}))})},nt=function(e){var t=e.tools,n=e.className,r=Ae();return Object(D.jsx)("div",{className:ze()(n,"flex justify-between w-full"),children:t.map((function(e,t){var n=e.icon,c=e.toolTip,a=e.active,o=e.action;return Object(D.jsx)(tt,{className:"rounded-full text-[12px] p-2",primary:!0,active:a,onClick:function(){return r(o)},toolTip:c,children:n},t)}))})},rt=function(e){var t,n=e.value,r=e.digits,a=e.primary,o=void 0===a||a,s=e.className,i=function(e){return Object(c.useMemo)((function(){return"0".repeat(e)}),[e])}(r),u=function(e,t){return Object(c.useMemo)((function(){var n=e.toString();return n.length>t?"9".repeat(t):n}),[e,t])}(n,r),l=(t=r-u.length,Object(c.useMemo)((function(){return{__html:"&nbsp;".repeat(t)}}),[t])),d=Object(c.useMemo)((function(){return{"text-primary":o,"text-secondary":!o}}),[o]);return Object(D.jsx)("div",{className:ze()(s,"flex relative leading-none font-digits p-2"),children:Object(D.jsxs)("div",{className:"relative mx-auto",children:[Object(D.jsx)("div",{className:ze()("opacity-20",d),children:i}),Object(D.jsxs)("div",{className:ze()("absolute top-0 left-0",d),children:[Object(D.jsx)("span",{dangerouslySetInnerHTML:l}),Object(D.jsx)("span",{children:u})]})]})})},ct=function(e){var t=e.rank,n=e.score,r=e.className;return Object(D.jsxs)("div",{className:ze()(r,"flex font-mono items-baseline space-x-4"),children:[Object(D.jsxs)("div",{className:"text-light",children:["#",t]}),Object(D.jsx)(rt,{digits:6,value:n})]})},at=function(e){var t=e.actionHome,n=void 0===t?Ie.quit():t,r=e.actionRestart,a=void 0===r?Ie.start(1):r,o=e.actionHighScores,s=void 0===o?N.open(p.HIGH_SCORES):o,i=e.className,l=Object(u.c)(b.score),d=Object(u.c)(h.highScores),f=Ae();Object(c.useEffect)((function(){f(N.recordScore(l))}),[f,l]);var j=Object(c.useMemo)((function(){return[{icon:Object(D.jsx)(P.j,{}),toolTip:"Home",action:n},{icon:Object(D.jsx)(qe.a,{}),toolTip:"Restart",action:a},{icon:Object(D.jsx)(Ze.a,{}),toolTip:"High Scores",action:s}]}),[n,a,s]),m=Object(c.useMemo)((function(){return d.indexOf(l)+1}),[d,l]);return Object(D.jsxs)("div",{className:ze()(i,"flex flex-col text-2xl"),children:[Object(D.jsxs)("div",{className:"flex flex-col ml-auto mr-auto",children:[Object(D.jsx)("div",{className:"font-mono text-center",children:"Your Score"}),Object(D.jsx)(ct,{rank:m,score:l}),Object(D.jsx)("div",{className:"font-mono text-center mt-5",children:"Your Best"}),Object(D.jsx)(ct,{rank:1,score:d[0]||0})]}),Object(D.jsx)(nt,{className:"mt-5",tools:j})]})},ot=function(e){var t=e.selectStart,n=void 0===t?h.startLevel:t,r=e.selectOpen,c=void 0===r?b.finished:r,a=Object(u.c)(n);return Object(D.jsx)(Ke,{className:"max-w-[12rem]",title:"Game Over",selectOpen:c,children:Object(D.jsx)(at,{actionRestart:Ie.start(a)})})},st=function(e){var t=e.selectScores,n=void 0===t?h.highScores:t,r=e.className,a=Object(u.c)(n),o=Object(c.useMemo)((function(){return[].concat(Object(_.a)(a||[]),Object(_.a)(Array(10).fill(0))).slice(0,9)}),[a]);return Object(D.jsx)("div",{className:ze()(r,"flex flex-col text-2xl"),children:o.map((function(e,t){return Object(D.jsx)(ct,{rank:t+1,score:e},t)}))})},it=function(e){var t=e.selectOpen,n=void 0===t?h.isOpen(p.HIGH_SCORES):t;return Object(D.jsx)(Ke,{className:"max-w-[12rem]",title:"High Scores",selectOpen:n,children:Object(D.jsx)(st,{className:"ml-auto mr-auto"})})},ut=function(e){var t=e.className;return Object(D.jsxs)("div",{className:ze()(t,"flex text-xs space-x-2"),children:[Object(D.jsxs)("div",{children:["Version ",l.version]}),Object(D.jsxs)("a",{href:l.github,className:"flex text-primary hover:underline items-center space-x-1",children:[Object(D.jsx)(P.i,{}),Object(D.jsx)("span",{children:"Source"})]})]})},lt=function(e){var t=e.value,n=e.onChange,r=e.iconOn,a=e.iconOff,o=e.className,s=Object(c.useMemo)((function(){var e=r||Object(D.jsx)(P.c,{className:"text-green-200"});return Object(c.cloneElement)(e,{className:"text-[24px] mr-1 ".concat(e.props.className)})}),[r]),i=Object(c.useMemo)((function(){var e=a||Object(D.jsx)(P.n,{className:"text-red-500"});return Object(c.cloneElement)(e,{className:"text-[24px] ".concat(e.props.className)})}),[a]);return Object(D.jsxs)("div",{className:ze()(o,"flex relative p-1 text-[26px] h-[26px] w-[50px] bg-black rounded-full cursor-pointer items-center justify-between"),onClick:function(){return n(!t)},children:[s,i,Object(D.jsx)("div",{className:ze()("bg-white rounded-full absolute top-[2px] left-[2px] h-[22px] w-[22px] transition-transform transform translate-x-0",{"translate-x-[24px]":Boolean(t)})})]})},dt=function(e){var t=e.selectDark,n=void 0===t?h.dark:t,r=e.className,c=Object(u.c)(n),a=Ae();return Object(D.jsx)(lt,{className:r,onChange:function(e){return a(N.dark(e))},value:c,iconOn:Object(D.jsx)(P.k,{className:"text-blue-200"}),iconOff:Object(D.jsx)(P.m,{className:"text-yellow-500"})})};function ft(e){var t,n=e.onChange,r=e.options,a=e.value,o=Object(c.useMemo)((function(){return r.findIndex((function(e){return e.value===a}))}),[a,r]),s=Object(c.useCallback)((function(){var e=Math.min(r.length-1,o+1);n(r[e].value)}),[n,r,o]),i=Object(c.useCallback)((function(){var e=Math.max(0,o-1);n(r[e].value)}),[n,r,o]);return Object(D.jsxs)("div",{className:"flex",children:[Object(D.jsx)(tt,{className:"px-4",onClick:i,disabled:o<=0,children:"-"}),Object(D.jsx)("div",{className:"flex-grow text-center",children:null===(t=r[o])||void 0===t?void 0:t.label}),Object(D.jsx)(tt,{className:"px-4",onClick:s,disabled:o>=r.length-1,children:"+"})]})}var jt,bt,mt=function(){var e=Object(u.c)(h.music),t=Object(u.c)(h.musicType),n=Object(u.c)(h.musicVolume),r=Object(u.c)(h.sound),c=Object(u.c)(h.soundVolume),a=Ae();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:"Sound Fx"}),Object(D.jsx)(tt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:r,onClick:function(){return a(N.sound())},children:W[r.toString()]}),Object(D.jsx)("div",{children:"Sound Fx Volume"}),Object(D.jsx)(ft,{options:V,value:c,onChange:function(e){return a(N.soundVolume(e))}}),Object(D.jsx)("div",{children:"Music"}),Object(D.jsx)(tt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return a(N.music())},children:Y[e.toString()]}),Object(D.jsx)("div",{children:"Music Volume"}),Object(D.jsx)(ft,{options:V,value:n,onChange:function(e){return a(N.musicVolume(e))}}),Object(D.jsx)("div",{children:"Music Type"}),Object(D.jsx)(ft,{options:K,value:t,onChange:function(e){return a(N.musicType(e))}})]})},Ot=function(){var e=Object(u.c)(h.ghostPiece),t=Ae();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:"Ghost Piece"}),Object(D.jsx)(tt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return t(N.ghostPiece())},children:e?Object(D.jsx)(P.c,{}):Object(D.jsx)(P.n,{})})]})},pt=["Digit","Key","Arrow"],vt=function(e){var t=e.label,n=e.keyCode,r=e.onClick,a=Object(c.useMemo)((function(){return function(e){return e&&e.replace(/[-_]/g," ").replace(/([A-Z])/g," $1")}(pt.reduce((function(e,t){return e.replace(t,"").trim()}),n))}),[n]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:t}),Object(D.jsx)(tt,{className:"w-full",onClick:r,children:a})]})},xt=function(e){var t=e.keyOf,n=e.onChange;return Object(c.useEffect)((function(){var e=function(e){var t=e.code;return n(t)};return document.addEventListener("keydown",e,{once:!0}),function(){return document.removeEventListener("keydown",e)}})),Object(D.jsx)("div",{className:"text-2xl font-bold text-center w-full uppercase",children:x[t]})},ht=function e(t){var n=t.selectKeys,r=void 0===n?h.keys:n,a=t.actionKeys,o=void 0===a?N.keys:a,s=Object(c.useState)(),i=Object(d.a)(s,2),l=i[0],f=i[1],j=Object(u.c)(r),b=Ae(),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";return Object(c.useMemo)((function(){return E(e,t)}),[e,t])}(e.name);return Object(D.jsxs)(D.Fragment,{children:[v.map((function(e,t){return Object(D.jsx)(vt,{keyCode:j[e],label:x[e],onClick:function(){return f(e)}},t)})),Object(D.jsxs)(Ve,{className:"max-w-[22rem]",title:"Press Key",open:Boolean(l),onClose:function(){return f(void 0)},children:[Object(D.jsx)(xt,{keyOf:l,onChange:function(e){m({pickKey:l,code:e}),b(o({keyOf:l,code:e})),f(void 0)}}),Object(D.jsx)(tt,{className:"mt-5 ml-auto mr-auto px-6 py-2",primary:!0,onClick:function(){return f(void 0)},children:"Cancel"})]})]})},gt=function(e){var t=e.darkMode,n=e.className,r=Ae();return Object(D.jsxs)("div",{className:ze()(n,"flex flex-col"),children:[Object(D.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[Object(D.jsx)(ht,{}),Object(D.jsx)(Ot,{}),Object(D.jsx)(mt,{}),Object(D.jsx)(tt,{className:"mt-3 py-2",onClick:function(){return r(N.resetScore())},children:"Reset High Scores"}),Object(D.jsx)(tt,{className:"mt-3 py-2",onClick:function(){return r(N.resetOptions())},children:"Reset Options"})]}),t&&Object(D.jsx)(dt,{className:"ml-auto mr-auto mt-5"})]})},yt=function(e){var t=e.selectWelcoming,n=void 0===t?b.welcoming:t,r=e.selectOpen,c=void 0===r?h.isOpen(p.OPTIONS):r,a=Object(u.c)(n);return Object(D.jsxs)(Ke,{className:"max-w-[22rem]",title:"Options",large:!0,selectOpen:c,children:[Object(D.jsx)(gt,{darkMode:!a}),Object(D.jsx)(ut,{className:"mt-auto mx-auto mt-5"})]})},Nt=function(e){var t=e.items,n=e.className,r=Ae();return Object(D.jsx)("div",{className:ze()(n,"flex flex-col"),children:t.map((function(e,t){var n=e.action,c=e.active,a=e.title;return Object(D.jsx)(tt,{className:"py-2 px-4 mb-4",primary:c,onClick:function(){return r(n)},children:a},t)}))})},kt=function(e){var t=e.selectMusic,n=void 0===t?h.music:t,r=e.selectSound,a=void 0===r?h.sound:r,o=e.selectStart,s=void 0===o?h.startLevel:o,i=e.closeAction,l=void 0===i?Ie.resume():i,d=e.selectOpen,f=void 0===d?b.paused:d,j=Object(u.c)(n),m=Object(u.c)(a),O=Object(u.c)(s),v=Object(c.useMemo)((function(){return[{icon:W[m.toString()],toolTip:J[m.toString()],active:m,action:N.sound()},{icon:Y[j.toString()],toolTip:Z[j.toString()],active:j,action:N.music()},{icon:Object(D.jsx)(P.h,{}),toolTip:"Options",action:N.open(p.OPTIONS)}]}),[j,m]),x=Object(c.useMemo)((function(){return[{title:"Continue",action:Ie.resume(),active:!0},{title:"Restart",action:Ie.start(O)},{title:"Quit Game",action:Ie.quit()}]}),[O]);return Object(D.jsxs)(Ke,{className:"max-w-[12rem]",title:"Paused",selectOpen:f,closeAction:l,children:[Object(D.jsx)(Nt,{className:"mb-5",items:x}),Object(D.jsx)(nt,{tools:v})]})},_t=(jt={},Object(fe.a)(jt,r.WELCOME,"Welcome"),Object(fe.a)(jt,r.STARTING,"Starting"),Object(fe.a)(jt,r.RUNNING,"Playing"),Object(fe.a)(jt,r.PAUSED,"Paused"),Object(fe.a)(jt,r.FINISHING,"Game Over"),Object(fe.a)(jt,r.FINISHED,"Game Over"),jt),Ct=function(e){var t=e.label,n=e.className,r=e.children,c=$e().transparent;return Object(D.jsxs)("div",{className:ze()(n,"flex items-center w-full",{"flex-col":!c,"flex-col-reverse":c}),children:[Object(D.jsx)("div",{className:"flex text-light mb-1",children:t}),Object(D.jsx)("div",{className:ze()("flex w-full flex-col",{"border border-gray-200 dark:border-gray-600 rounded-lg":c,"dark:nm-inset-gray-800 nm-inset-gray-100":!c}),children:r})]})},wt=(n(82),bt={},Object(fe.a)(bt,L.I,"color-i"),Object(fe.a)(bt,L.O,"color-o"),Object(fe.a)(bt,L.T,"color-t"),Object(fe.a)(bt,L.S,"color-s"),Object(fe.a)(bt,L.Z,"color-z"),Object(fe.a)(bt,L.J,"color-j"),Object(fe.a)(bt,L.L,"color-l"),bt),St=function(e){var t=e.ghost,n=e.glow,r=e.grid,a=e.speed,o=e.type,s=Object(c.useMemo)((function(){var e={};return o&&n&&a&&(e.animationDuration="".concat(a,"ms")),t&&(e.opacity="".concat(t)),e}),[o,n,a,t]);return Object(D.jsx)("div",{className:ze()("game-block",{"game-block-border":r}),"data-testid":"game-block",children:Object(D.jsx)("div",{className:ze()("block-color relative w-full h-full rounded-sm",!n&&o&&wt[o],{"color-glow":o&&n,ghost:o&&t,fill:o&&!t}),style:s})})},Tt=function(e){var t=e.center,n=void 0===t?[2,1]:t,r=e.grid,a=void 0===r||r,o=e.count,s=void 0===o?4:o,i=e.type,u=void 0===i?L.Z:i,l=e.values,f=e.className,j=Object(c.useMemo)((function(){var e=Object(d.a)(n,2),t=e[0],r=e[1],c=Array(s*s).fill(void 0);return null===l||void 0===l||l.forEach((function(e){var n=Object(d.a)(e,2),a=n[0],o=n[1];return c[o*s+a+t+r*s]=u})),c}),[s,n,u,l]);return Object(D.jsx)("div",{className:ze()(f,"grid w-full",{"game-grid":a}),style:{gridTemplateColumns:"repeat(".concat(s,", minmax(0, 1fr))")},children:j.map((function(e,t){return Object(D.jsx)(St,{type:e,grid:a},t)}))})},Rt=function(e){var t=e.label,n=e.selectPieces,r=e.className,c=Object(u.c)(n);return Object(D.jsx)(Ct,{label:t,children:Object(D.jsx)("div",{className:ze()(r,"flex flex-col relative w-full"),children:c.map((function(e,t){return Object(D.jsx)(Tt,{values:e?je[e][0]:void 0,type:e,grid:!1},t)}))})})},Et=n(61),Mt=function(e){var t=e.keyCode,n=e.onPress,r=e.onRelease;return Object(c.useEffect)((function(){var e=function(e){e.repeat||e.code!==t||("keydown"===e.type&&n&&n(),"keyup"===e.type&&r&&r())};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[t,n,r]),null},It=function(e){var t=e.disabled,n=e.keyCode,r=e.onHold,a=e.className,o=Object(c.useState)(!1),s=Object(d.a)(o,2),i=s[0],u=s[1],l=$e().large;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(tt,{"data-testid":"game-hold",className:ze()(a,"flex text-sm",{"p-2":!l,"p-3":l}),preventFocus:!0,disabled:t,active:i&&!t,shape:He.ROUND,onClick:function(){return r()},children:Object(D.jsx)(Et.a,{})}),Object(D.jsx)(Mt,{keyCode:n,onPress:function(){!t&&r(),u(!0)},onRelease:function(){u(!1)}})]})},Lt=n(50),Pt=function(e){var t=e.disabled,n=e.keyCodeLeft,r=e.keyCodeRight,a=e.onRotateLeft,o=e.onRotateRight,s=e.className,i=Object(c.useState)(!1),u=Object(d.a)(i,2),l=u[0],f=u[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],O=b[1],p=$e().large,v=Object(c.useMemo)((function(){return ze()(s,"flex text-lg items-center justify-center",{"w-14 h-14":!p,"w-16 h-16":p})}),[s,p]);return Object(D.jsxs)("div",{className:"flex gap-4 my-auto",children:[Object(D.jsx)(tt,{"data-testid":"game-rotate-left",className:v,preventFocus:!0,disabled:t,active:l,shape:He.LEFT,onPress:a,children:Object(D.jsx)(Lt.a,{})}),Object(D.jsx)(tt,{"data-testid":"game-rotate-right",className:v,preventFocus:!0,disabled:t,active:m,shape:He.RIGHT,onPress:o,children:Object(D.jsx)(Lt.b,{})}),!t&&Object(D.jsx)(Mt,{keyCode:n,onPress:function(){a(),f(!0)},onRelease:function(){f(!1)}}),!t&&Object(D.jsx)(Mt,{keyCode:r,onPress:function(){o(),O(!0)},onRelease:function(){O(!1)}})]})},Dt=function(e){var t=e.className,n=Ae(),r=$e().large;return Object(D.jsx)(tt,{"data-testid":"game-settings",className:ze()(t,"flex text-sm",{"p-2":!r,"p-3":r}),preventFocus:!0,primary:!0,shape:He.ROUND,onClick:function(){return n(Ie.pause())},children:Object(D.jsx)(P.b,{})})},Ft=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onDrop,o=e.shape,s=e.className,i=Object(c.useState)(!1),u=Object(d.a)(i,2),l=u[0],f=u[1],j=$e().large;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(tt,{className:ze()(s,"items-center justify-center",{"p-4":!j,"p-5":j}),disabled:t,preventFocus:!0,shape:o,active:l,"data-testid":"game-soft-drop",onPress:function(){return a(!0)},onRelease:function(){return a(!1)},children:n}),!t&&Object(D.jsx)(Mt,{keyCode:r,onPress:function(){a(!0),f(!0)},onRelease:function(){a(!1),f(!1)}})]})},Ht=function(e){var t=e.emitFirst,n=e.disabled,r=e.onRepeat,a=e.speed;return Object(c.useEffect)((function(){if(!n&&(t&&r(),a>0)){var e=setInterval((function(){return r()}),a);return function(){return clearInterval(e)}}}),[t,n,r,a]),null},At=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onMove,o=e.speed,s=void 0===o?500:o,i=e.shape,u=e.className,l=Object(c.useState)(0),f=Object(d.a)(l,2),j=f[0],b=f[1],m=Object(c.useState)(!1),O=Object(d.a)(m,2),p=O[0],v=O[1],x=$e().large;Object(c.useEffect)((function(){p&&1!==j&&a()}),[p,j,a]);var h=Object(c.useCallback)((function(){v(!0),b(0)}),[]),g=Object(c.useCallback)((function(){return v(!1)}),[]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(tt,{"data-testid":"game-move",className:ze()("items-center justify-center",u,{"p-4":!x,"p-5":x}),preventFocus:!0,disabled:t,active:p,shape:i,onPress:function(){return h()},onRelease:function(){return g()},children:n}),!t&&Object(D.jsx)(Mt,{keyCode:r,onPress:h,onRelease:g}),!t&&Object(D.jsx)(Ht,{onRepeat:function(){return b(j+1)},disabled:!p,speed:s})]})},Gt=function(e){var t=e.disabled,n=e.hardDrop,r=e.left,c=e.right,a=e.softDrop,o=e.onHardDrop,s=e.onLeft,i=e.onRight,u=e.onSoftDrop,l=e.speed,d=void 0===l?500:l,f=e.className;return Object(D.jsxs)("div",{className:ze()(f,"grid grid-cols-3 gap-1"),children:[Object(D.jsx)(Ft,{className:"col-start-2",disabled:t,icon:Object(D.jsx)(P.g,{}),keyCode:n,onDrop:function(e){e&&o()},shape:He.UP}),Object(D.jsx)(At,{className:"col-start-1",disabled:t,icon:Object(D.jsx)(P.e,{}),keyCode:r,onMove:s,speed:d,shape:He.LEFT}),Object(D.jsx)(At,{className:"col-start-3",disabled:t,icon:Object(D.jsx)(P.f,{}),keyCode:c,onMove:i,speed:d,shape:He.RIGHT}),Object(D.jsx)(Ft,{className:"col-start-2",disabled:t,icon:Object(D.jsx)(P.d,{}),keyCode:a,onDrop:u,shape:He.DOWN})]})},Ut=function(e){var t=e.selectKeys,n=void 0===t?h.keys:t,r=e.selectRepeatSpeed,c=void 0===r?b.repeatSpeed:r,a=e.selectEnabled,o=void 0===a?b.running:a,s=e.selectHoldEnabled,i=void 0===s?b.holdEnabled:s,l=e.transparent,d=e.className,f=Object(u.c)(n),j=f.left,m=f.right,O=f.rotate_left,p=f.rotate_right,v=f.soft_drop,x=f.hard_drop,g=f.hold,y=Object(u.c)(c),N=Object(u.c)(o),k=Object(u.c)(i),_=Ae(),C=$e().large;return Object(D.jsx)("div",{className:ze()(d,"flex relative"),children:Object(D.jsxs)(et,{transparent:Boolean(l),large:C,children:[Object(D.jsx)(Gt,{disabled:!N,left:j,right:m,softDrop:v,hardDrop:x,onLeft:function(){return _(Ie.move(de.LEFT))},onRight:function(){return _(Ie.move(de.RIGHT))},onSoftDrop:function(e){return _(Ie.softDrop(e))},onHardDrop:function(){return _(Ie.hardDrop())},speed:y}),Object(D.jsxs)("div",{className:"flex relative ml-auto",children:[Object(D.jsx)(It,{className:"absolute top-0 left-0",keyCode:g,disabled:!N||!k,onHold:function(){_(Ie.hold()),_(Ie.tick())}}),Object(D.jsx)(Pt,{disabled:!N,keyCodeLeft:O,keyCodeRight:p,onRotateLeft:function(){return _(Ie.rotate(de.LEFT))},onRotateRight:function(){return _(Ie.rotate(de.RIGHT))}})]}),Object(D.jsx)(Dt,{className:"absolute top-0 right-0"})]})})},Bt=function(e,t,n){var r=Object(c.useMemo)((function(){return[e,t].concat(Object(_.a)(n))}),[e,t,n]);Object(c.useEffect)((function(){var n=setInterval((function(){return e()}),t);return function(){return clearInterval(n)}}),r)},zt=function(e){var t=e.speed,n=e.onTick;return Bt((function(){return n()}),t,[t,n]),null},Vt=function(e){var t=e.count,n=e.onStart,r=e.className,a=Object(c.useState)((function(){return t})),o=Object(d.a)(a,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){if(s>0){var e=setInterval((function(){return i(s-1)}),1e3);return function(){return clearInterval(e)}}0===s&&n()}),[s,n]),Object(D.jsx)("div",{"data-testid":"game-timer",className:ze()(r,"flex font-mono items-center justify-center text-9xl"),children:s>0?s:""})};Vt.defaultProps={count:3};var Kt=function(e){var t=e.indx,n=Object(u.c)(b.screenCell(t)),r=Object(u.c)(b.speed);return n?Object(D.jsx)(St,{type:n.type,glow:n.glow,ghost:n.ghost,speed:r,grid:!0}):null},Wt=(n(83),function(e){var t=e.className,n=Object(u.c)(b.size),r=Object(d.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return Array(a*o).fill(null)}),[a,o]);return Object(D.jsx)("div",{className:ze()(t,"game-grid ml-auto mr-auto w-full"),style:{gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))")},children:s.map((function(e,t){return Object(D.jsx)(Kt,{indx:t},t)}))})}),Jt=function(e){var t=e.autoPlay,n=void 0===t||t,r=e.loop,a=e.onDone,o=e.onLoaded,s=e.src,i=e.volume,u=Object(c.useRef)(null);return Object(c.useEffect)((function(){i&&(u.current.volume=i)}),[u,i]),Object(D.jsx)("audio",{src:s,ref:u,autoPlay:n,controls:!1,loop:Boolean(r),onEnded:function(){return a&&a()},onCanPlayThrough:function(){return o&&o()}})},Yt=function(){var e=Object(u.c)(h.music),t=Object(u.c)(h.musicVolume),n=Object(u.c)(h.musicType);return Object(D.jsx)(D.Fragment,{children:e&&Object(D.jsx)(Jt,{src:F[n],volume:t/100,loop:!0})})},Zt=function(e){var t=e.sources,n=e.onLoaded,r=Object(c.useMemo)((function(){var e=t.map((function(e){return[e,!1]}));return new Map(e)}),[t]),a=Object(c.useCallback)((function(e){r.set(e,!0),Array.from(r.values()).every((function(e){return e}))&&n()}),[r,n]);return Object(D.jsx)(D.Fragment,{children:Array.from(r.keys()).map((function(e){return Object(D.jsx)(Jt,{src:e,autoPlay:!1,onLoaded:function(){return a(e)}},e)}))})},qt=function(e){var t=e.onLoaded,n=e.className,r=Object(u.c)(h.musicType),a=Object(c.useMemo)((function(){return[].concat(Object(_.a)(z),[F[r]])}),[r]);return Object(D.jsxs)("div",{"data-testid":"game-loader",className:ze()(n,"flex font-mono items-center justify-center text-2xl"),children:["Loading",Object(D.jsx)(Zt,{sources:a,onLoaded:t})]})},Qt=function(){var e=Object(u.c)(h.sound),t=Object(u.c)(h.soundVolume),n=Object(u.c)(b.soundTracks),r=Ae();return Object(D.jsx)(D.Fragment,{children:e&&n.map((function(e){var n=e.id,c=e.src;return Object(D.jsx)(Jt,{src:c,volume:t/100,onDone:function(){return r(Ie.soundTrack(n))}},n)}))})},Xt=function(e){var t=e.message,n=e.className;return Object(D.jsx)("div",{"data-testid":"game-toast",className:ze()(n,"flex font-mono items-center justify-center text-4xl"),children:t})},$t=function(e){var t=e.className,n=Object(c.useState)(!1),r=Object(d.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(!1),i=Object(d.a)(s,2),l=i[0],f=i[1],j=Ae(),m=function(){var e=function(){return"visible"===document.visibilityState},t=Object(c.useState)(e()),n=Object(d.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t=function(){return a(e())};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}),[]),r}(),O=Object(u.c)(b.starting),p=Object(u.c)(b.running),v=Object(u.c)(b.finishing),x=Object(u.c)(b.restartTicker),h=Object(u.c)(b.toastMessage),g=Object(u.c)(b.speed);Object(c.useEffect)((function(){if(h){f(!0);var e=setTimeout((function(){f(!1)}),1e3);return function(){f(!1),clearTimeout(e)}}}),[h]),Object(c.useEffect)((function(){m||j(Ie.pause())}),[m,j]);var y=$e().transparent;return Object(D.jsxs)("div",{className:ze()(t,"flex relative overflow-hidden desktop:p-4 w-full",{"border border-gray-200 dark:border-gray-600 rounded-lg":y,"dark:nm-inset-gray-800 nm-inset-gray-100":!y}),children:[Object(D.jsx)(Wt,{}),p&&Object(D.jsx)(Yt,{}),Object(D.jsx)(Qt,{}),O&&!a&&Object(D.jsx)(qt,{className:"absolute w-full h-full -m-4",onLoaded:function(){return o(!0)}}),O&&a&&Object(D.jsx)(Vt,{className:"absolute w-full h-full -m-4",onStart:function(){return j(Ie.run())}}),l&&Object(D.jsx)(Xt,{className:"absolute w-full h-full -m-4",message:h}),p&&[x].map((function(e){return Object(D.jsx)(zt,{speed:g,onTick:function(){return j(Ie.tick())}},e)})),v&&Object(D.jsx)(zt,{speed:50,onTick:function(){return j(Ie.finishing())}})]})},en=function(e){var t=e.label,n=e.primary,r=e.value;return Object(D.jsx)(Ct,{label:t,children:Object(D.jsx)(rt,{className:"text-[1.25rem] h-[1.9rem] sm:text-2xl sm:h-[2.5rem]",digits:7,primary:n,value:r})})},tn=function(e){var t=e.className,n=Object(u.c)(b.score),r=Object(u.c)(b.level),c=Object(u.c)(b.lines);return Object(D.jsxs)("div",{className:ze()(t,"flex"),children:[Object(D.jsx)(en,{label:"Score",value:n}),Object(D.jsx)(en,{label:"Level",value:r,primary:!1}),Object(D.jsx)(en,{label:"Lines",value:c,primary:!1})]})},nn=function(e){var t=e.floatControls;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"grid grid-cols-desktop gap-4 m-auto",children:[Object(D.jsxs)("div",{className:"flex flex-col",children:[Object(D.jsx)(Rt,{className:"p-4",label:"Hold",selectPieces:b.hold}),Object(D.jsx)(tn,{className:"flex-col mt-auto gap-4"})]}),Object(D.jsx)($t,{}),Object(D.jsx)(Rt,{className:"p-4",label:"Next",selectPieces:b.next}),!t&&Object(D.jsx)(Ut,{className:"col-start-2 mt-5"})]}),t&&Object(D.jsx)("div",{className:"flex absolute bottom-0 mb-5 w-full",children:Object(D.jsx)("div",{className:"grid grid-cols-desktop gap-4 mx-auto",children:Object(D.jsx)(Ut,{className:"col-start-2",transparent:!0})})})]})},rn=function(){return Object(D.jsxs)("div",{className:"flex flex-col p-4",children:[Object(D.jsx)(tn,{className:"mx-auto gap-2"}),Object(D.jsxs)("div",{className:"grid grid-cols-mobile gap-2 mx-auto",children:[Object(D.jsx)("div",{className:"flex flex-col",children:Object(D.jsx)(Rt,{className:"p-1",label:"Hold",selectPieces:b.hold})}),Object(D.jsx)($t,{}),Object(D.jsx)("div",{className:"flex flex-col",children:Object(D.jsx)(Rt,{className:"p-1",label:"Next",selectPieces:b.next})})]}),Object(D.jsx)("div",{className:"flex absolute bottom-4 left-4 right-4",children:Object(D.jsx)(Ut,{className:"w-full",transparent:!0})})]})},cn=ee.a.mark(dn),an=ee.a.mark(fn),on=ee.a.mark(jn),sn=ee.a.mark(bn),un=ee.a.mark(mn),ln=["text-tetro_i-400","text-tetro_o-400","text-tetro_t-400","text-tetro_s-400","text-tetro_z-400","text-tetro_j-400","text-tetro_l-400"];function dn(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(ln,"t0",1);case 1:case"end":return e.stop()}}),cn)}function fn(e){var t;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=9;break}return n.next=4,"dark:text-gray-200 text-gray-300";case 4:return n.next=6,"dark:text-gray-600 text-gray-800";case 6:t++,n.next=1;break;case 9:case"end":return n.stop()}}),an)}function jn(e){var t;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,ln[Q(ln.length)];case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),on)}function bn(e,t,n){var r,c,a,o;return ee.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=ln.map((function(e){return[e,e,e]})).flat(),c=e,a=e+t,o=n?c:a;case 4:if(!(n?o<a:o>c)){s.next=10;break}return s.next=7,r[o%r.length];case 7:n?o++:o--,s.next=4;break;case 10:case"end":return s.stop()}}),sn)}function mn(e,t){return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(dn(),"t0",2);case 2:return n.delegateYield(jn(10),"t1",3);case 3:return n.delegateYield(bn(e,t,!0),"t2",4);case 4:return n.delegateYield(fn(2),"t3",5);case 5:return n.delegateYield(bn(e,t,!1),"t4",6);case 6:n.next=0;break;case 8:case"end":return n.stop()}}),un)}var On=function(e){return e.map((function(e){return e.color.next().value}))},pn=function(e,t){var n=Object(c.useState)([]),r=Object(d.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return function(e){return Array.from(e).map((function(t,n){return{char:t,key:n,color:mn(n,e.length)}}))}(e)}),[e]);return Object(c.useEffect)((function(){return o(On(s))}),[s]),Bt((function(){return o(On(s))}),t,[s]),[s,a]},vn=function(e){var t=e.name,n=e.speed,r=void 0===n?200:n,c=e.className,a=pn(t,r),o=Object(d.a)(a,2),s=o[0],i=o[1];return Object(D.jsxs)("div",{"data-testid":"app-logo",className:ze()("flex flex-col items-center",c),children:[Object(D.jsx)("div",{className:"font-mono text-2xl",children:"welcome to"}),Object(D.jsx)("div",{className:"flex text-4xl font-logo font-bold",children:s.map((function(e){var t=e.key,n=e.char;return Object(D.jsx)("div",{"data-testid":"app-logo-".concat(t),className:i[t],children:n},t)}))})]})},xn=function(e){var t=e.selectStart,n=void 0===t?h.startLevel:t,r=Object(u.c)(n),a=Object(c.useMemo)((function(){return[{title:"New Game",action:Ie.start(r),active:!0},{title:"Level: ".concat(r),action:N.startLevel()},{title:"High Scores",action:N.open(p.HIGH_SCORES)},{title:"Options",action:N.open(p.OPTIONS)},{title:"Credits",action:N.open(p.CREDITS)}]}),[r]);return Object(D.jsxs)("div",{className:"flex flex-col h-full",children:[Object(D.jsx)(vn,{className:"mt-auto mb-14",name:l.brandName.toUpperCase()}),Object(D.jsx)(Nt,{className:"w-44 ml-auto mr-auto",items:a}),Object(D.jsx)(dt,{className:"ml-auto mr-auto mt-5 mb-auto"})]})},hn=function(){var e=Object(u.c)(b.welcoming),t=Object(i.a)("(min-width:600px)"),n=Object(i.a)("(max-height:850px)"),r=Object(i.a)("(max-width:380px)");!function(e){var t=Object(u.c)(h.persist),n=Ae();Object(c.useEffect)((function(){var t=localStorage.getItem(e);if(t)try{var r=JSON.parse(t);(null===r||void 0===r?void 0:r.version)===y&&n(N.persist(r))}catch(c){console.error("Could not read persist data.",c)}}),[e,n]),Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t))}),[e,t])}(l.storageKey),function(){var e=Object(u.c)(b.status),t=Object(c.useMemo)((function(){return"".concat(_t[e]," | ").concat(l.brandName)}),[e]);Object(c.useEffect)((function(){document.title=t}),[t])}();var a=Object(c.useMemo)((function(){return Object(D.jsx)(et,{transparent:!t,large:!t&&!r,children:t?Object(D.jsx)(nn,{floatControls:n}):Object(D.jsx)(rn,{})})}),[t,n,r]);return Object(D.jsxs)("div",{className:"flex flex-col w-full h-full",children:[e?Object(D.jsx)(xn,{}):a,Object(D.jsx)(kt,{}),Object(D.jsx)(ot,{}),Object(D.jsx)(it,{}),Object(D.jsx)(yt,{}),Object(D.jsx)(Ye,{})]})},gn=n(108),yn=function(e){var t=e.children;return function(){var e=Object(u.c)(h.dark);Object(c.useEffect)((function(){var t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}),[e])}(),Object(D.jsx)(gn.b,{injectFirst:!0,children:t})},Nn=function(e){var t=e.children,n=Object(c.useMemo)((function(){return Ge()}),[]);return Object(D.jsx)(u.a,{store:n,children:Object(D.jsx)(yn,{children:t})})},kn=(n(84),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))});s.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(Nn,{children:Object(D.jsx)(hn,{})})}),document.getElementById("root")),kn()}},[[85,1,2]]]);
//# sourceMappingURL=main.af99002f.chunk.js.map