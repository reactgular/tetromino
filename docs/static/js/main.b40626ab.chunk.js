(this.webpackJsonptetromino=this.webpackJsonptetromino||[]).push([[0],{80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n.n(c),o=n(14),s=n.n(o),i=n(22),u=n(105),l=n(4),d={analytics:"UA-141015392-3",brandName:"Tetromino",github:"https://github.com/reactgular/tetromino",storageKey:"tetromino",version:"1.0.0",base:"/tetromino"},f=n(7),j=n(45),b=function(e){return e};!function(e){e.WELCOME="welcome",e.STARTING="starting",e.RUNNING="running",e.PAUSED="paused",e.FINISHING="finishing",e.FINISHED="finished"}(r||(r={}));var m,O={buffer:{rows:[],width:0,height:0},restart_ticker:0,fast_speed:25,level:1,lines_total:0,lines_level:0,lines_level_up:1,hold_enable:!0,next:[void 0,void 0,void 0],next_max:3,player_freeze:!1,repeat_speed:100,score:0,screen:[],soft_drop:!1,sound_id:1,sound_tracks:[],status:r.WELCOME},v="game";!function(e){var t=e.game=Object(j.a)(b,(function(e){return e.game})),n=Object(j.a)(t,(function(e){return e.buffer})),c=Object(j.a)(t,(function(e){return e.screen})),a=e.status=Object(j.a)(t,(function(e){return e.status})),o=(e.welcoming=Object(j.a)(a,(function(e){return e===r.WELCOME})),e.finishing=Object(j.a)(a,(function(e){return e===r.FINISHING})),e.finished=Object(j.a)(a,(function(e){return e===r.FINISHED})),e.paused=Object(j.a)(a,(function(e){return e===r.PAUSED})),e.starting=Object(j.a)(a,(function(e){return e===r.STARTING})),e.running=Object(j.a)(a,(function(e){return e===r.RUNNING})),e.level=Object(j.a)(t,(function(e){return e.level})),e.lines=Object(j.a)(t,(function(e){return e.lines_total+e.lines_level})),e.restartTicker=Object(j.a)(t,(function(e){return e.restart_ticker})),e.score=Object(j.a)(t,(function(e){return e.score})),e.next=Object(j.a)(t,(function(e){return e.next})),e.hold=Object(j.a)(t,(function(e){return e.hold?[e.hold]:[void 0]})),e.holdEnabled=Object(j.a)(t,(function(e){return e.hold_enable})),e.repeatSpeed=Object(j.a)(t,(function(e){return e.repeat_speed})),e.screenCell=function(e){return Object(j.a)(c,(function(t){return t[e]}))},e.speed=Object(j.a)(t,(function(e){if(e.soft_drop&&e.player)return e.fast_speed;var t=500-20*e.level;return Math.max(e.fast_speed,t)})),e.size=Object(j.a)(n,(function(e){return[e.width,e.height]})));e.aspectRatio=Object(j.a)(o,(function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return"".concat(n/r," / 0.9")})),e.soundTracks=Object(j.a)(t,(function(e){return e.sound_tracks})),e.toastMessage=Object(j.a)(t,(function(e){return e.toast_message}))}(m||(m={}));var p,x=["left","right","rotate_left","rotate_right","soft_drop","hard_drop","hold"],h={left:"Move Left",right:"Move Right",rotate_left:"Rotate Left",rotate_right:"Rotate Right",soft_drop:"Soft Drop",hard_drop:"Hard Drop",hold:"Hold"};!function(e){e.OPTIONS="options",e.HIGH_SCORES="high_scores",e.CREDITS="credits"}(p||(p={}));var g,y={dark:!1,ghost_piece:!0,high_scores:[],music:!0,music_type:0,music_volume:80,sound:!0,sound_volume:80,start_level:1,keys:{right:"ArrowRight",left:"ArrowLeft",rotate_left:"ArrowUp",rotate_right:"KeyZ",soft_drop:"ArrowDown",hard_drop:"Space",hold:"KeyC"}},N=d.version,k="app";!function(e){var t=e.app=Object(j.a)(b,(function(e){return e.app})),n=e.dark=Object(j.a)(t,(function(e){return Boolean(e.dark)})),r=e.highScores=Object(j.a)(t,(function(e){return e.high_scores})),c=e.ghostPiece=Object(j.a)(t,(function(e){return e.ghost_piece})),a=e.music=Object(j.a)(t,(function(e){return Boolean(e.music)})),o=e.musicType=Object(j.a)(t,(function(e){return e.music_type})),s=e.musicVolume=Object(j.a)(t,(function(e){return e.music_volume})),i=e.sound=Object(j.a)(t,(function(e){return Boolean(e.sound)})),u=e.soundVolume=Object(j.a)(t,(function(e){return e.sound_volume})),l=e.dialog=Object(j.a)(t,(function(e){return e.dialog})),f=(e.isOpen=function(e){return Object(j.a)(l,(function(t){return t===e}))},e.startLevel=Object(j.a)(t,(function(e){return e.start_level}))),m=e.keys=Object(j.a)(t,(function(e){return e.keys}));e.persist=Object(j.a)(n,c,f,i,u,a,s,o,r,m,(function(e,t,n,r,c,a,o,s,i,u){return{version:d.version,dark:e,ghost_piece:t,start_level:n,sound:r,sound_volume:c,music:a,music_volume:o,music_type:s,high_scores:i,keys:u}}))}(g||(g={}));var _,w,C=n(20),S=n(6),T=n(12),R=function(e){var t=e.getState;return function(e){return function(n){return e(Object(T.a)(Object(T.a)({},n),{},{snapshot:t()}))}}},E=n(24),M={log:console.log,error:console.error,debug:console.debug},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",n=M[t]||console[t];return n.bind(console,"".concat(e,":"))},L=n(34),P=n(54);!function(e){var t=function(e){return"".concat(k,"/").concat(e)};e.dark=Object(S.b)(t("dark")),e.ghostPiece=Object(S.b)(t("ghost_piece")),e.music=Object(S.b)(t("music")),e.musicType=Object(S.b)(t("music_type")),e.musicVolume=Object(S.b)(t("music_volume")),e.sound=Object(S.b)(t("sound")),e.soundVolume=Object(S.b)(t("sound_volume")),e.open=Object(S.b)(t("open")),e.close=Object(S.b)(t("close")),e.startLevel=Object(S.b)(t("start_level")),e.recordScore=Object(S.b)(t("record_score")),e.resetScore=Object(S.b)(t("reset_store")),e.resetOptions=Object(S.b)(t("reset_options")),e.keys=Object(S.b)(t("keys")),e.persist=Object(S.b)(t("persist"))}(_||(_={})),function(e){var t=function(e,t){i.a.event({category:k,action:e,value:t})};e.slice=Object(S.c)({name:k,initialState:y,reducers:{},extraReducers:function(e){e.addCase(_.dark,(function(e,n){var r=n.payload;e.dark=void 0===r?!e.dark:Boolean(r),t("dark",e.dark?1:0)})).addCase(_.ghostPiece,(function(e,t){var n=t.payload;e.ghost_piece=void 0===n?!e.ghost_piece:Boolean(n)})).addCase(_.music,(function(e,n){var r=n.payload;e.music=void 0===r?!e.music:Boolean(r),t("music",e.music?1:0)})).addCase(_.musicVolume,(function(e,t){var n=t.payload;e.music_volume=n})).addCase(_.musicType,(function(e,n){var r=n.payload;e.music_type=r,t("music_type",e.music_type)})).addCase(_.sound,(function(e,n){var r=n.payload;e.sound=void 0===r?!e.sound:Boolean(r),t("sound",e.sound?1:0)})).addCase(_.soundVolume,(function(e,t){var n=t.payload;e.sound_volume=n})).addCase(_.keys,(function(e,t){var n,r=t.payload,c=Object(P.a)(x);try{for(c.s();!(n=c.n()).done;){var a=n.value;if(e.keys[a]===r.code){e.keys[a]="";break}}}catch(o){c.e(o)}finally{c.f()}e.keys[r.keyOf]=r.code})).addCase(_.open,(function(e,t){var n=t.payload;e.dialog=n})).addCase(_.close,(function(e){e.dialog=void 0})).addCase(_.startLevel,(function(e,n){var r=n.payload;void 0===r?1===e.start_level?e.start_level=5:e.start_level=e.start_level<25?e.start_level+5:1:e.start_level=Math.max(1,Math.min(r,25)),t("start_level",e.start_level)})).addCase(_.recordScore,(function(e,n){var r=n.payload,c=Array.from(new Set([].concat(Object(C.a)(e.high_scores),[r])));c.sort((function(e,t){return e-t})),e.high_scores=c.reverse().slice(0,9),t("high_scores",r)})).addCase(_.resetScore,(function(e){e.high_scores=[]})).addCase(_.resetOptions,(function(e){t("reset_options");var n=e.dark,r=e.dialog,c=e.high_scores;return Object(T.a)(Object(T.a)({},y),{},{dark:n,dialog:r,high_scores:c})})).addCase(_.persist,(function(e,t){var n=t.payload,r=n.version,c=Object(L.a)(n,["version"]);if(r===d.version)return Object(T.a)(Object(T.a)({},e),c)}))}})}(w||(w={}));var D,F=n(10),A=n(1),H=["".concat(d.base,"/audio/music/bonkers-for-arcades.mp3"),"".concat(d.base,"/audio/music/the-ice-cream-man.mp3"),"".concat(d.base,"/audio/music/8-bit-perplexion.mp3"),"".concat(d.base,"/audio/music/its-raining-pixels.mp3"),"".concat(d.base,"/audio/music/arcade-puzzler.mp3")],G="".concat(d.base,"/audio/sounds/power-down-13.mp3"),U="".concat(d.base,"/audio/sounds/retro-chip-power.mp3"),z="".concat(d.base,"/audio/sounds/ui-quirky-19.mp3"),B="".concat(d.base,"/audio/sounds/zapsplat_bambo_swoosh.mp3"),V="".concat(d.base,"/audio/sounds/zapsplat_level_up.mp3"),Z=[G,U,z,B,V],K=Array(11).fill(null).map((function(e,t){return 10*t})).map((function(e){return{label:"".concat(e,"%"),value:e}})),W=H.map((function(e,t){return{label:"Type ".concat(t+1),value:t}})),J={true:Object(A.jsx)(F.p,{}),false:Object(A.jsx)(F.o,{})},Y={true:"Turn sound off",false:"Turn sound on"},q={true:Object(A.jsx)(F.l,{}),false:Object(A.jsx)(F.o,{})},Q={true:"Turn music off",false:"Turn music on"};!function(e){e.I="i",e.O="o",e.T="t",e.S="s",e.Z="z",e.J="j",e.L="l"}(D||(D={}));var X=Object.values(D),$=function(e){return Math.floor(Math.random()*e)},ee=function(){return X[$(X.length)]},te=n(13),ne=n.n(te),re=ne.a.mark(ce);function ce(e){var t;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,{};case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),re)}var ae=ne.a.mark(oe);function oe(e,t){var n;return ne.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0;case 1:if(!(n<t)){r.next=7;break}return r.next=4,{cells:Array.from(ce(e))};case 4:n++,r.next=1;break;case 7:case"end":return r.stop()}}),ae)}function se(e,t,n){var r=e.width,c=e.height;return t<0||t>=r||n<0||n>=c}function ie(e,t,n){return void 0!==e.rows[n].cells[t].type}function ue(e,t){for(var n=e.x,r=e.y,c=e.piece,a=0;a<c.length;a++){var o=Object(f.a)(c[a],2),s=n+o[0],i=r+o[1];if(se(t,s,i)||ie(t,s,i))return!0}return!1}var le,de,fe,je,be=n(9),me=(le={},Object(be.a)(le,D.O,[[[-1,0],[0,0],[-1,1],[0,1]]]),Object(be.a)(le,D.I,[[[-2,0],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[0,1],[0,2]]]),Object(be.a)(le,D.S,[[[0,-1],[0,0],[1,0],[1,1]],[[0,0],[1,0],[-1,1],[0,1]]]),Object(be.a)(le,D.Z,[[[1,-1],[0,0],[1,0],[0,1]],[[-1,0],[0,0],[0,1],[1,1]]]),Object(be.a)(le,D.L,[[[1,-1],[-1,0],[0,0],[1,0]],[[-1,-1],[0,-1],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[-1,1]],[[0,-1],[0,0],[0,1],[1,1]]]),Object(be.a)(le,D.J,[[[-1,-1],[-1,0],[0,0],[1,0]],[[0,-1],[0,0],[-1,1],[0,1]],[[-1,0],[0,0],[1,0],[1,1]],[[0,-1],[1,-1],[0,0],[0,1]]]),Object(be.a)(le,D.T,[[[0,-1],[-1,0],[0,0],[1,0]],[[0,-1],[-1,0],[0,0],[0,1]],[[-1,0],[0,0],[1,0],[0,1]],[[0,-1],[0,0],[1,0],[0,1]]]),le);function Oe(e,t){for(var n=e.x,r=e.y,c=e.type,a=e.rotate,o=me[c][a],s=new Set,i=0;i<o.length;i++){var u=Object(f.a)(o[i],2),l=u[0],d=u[1],j=t.rows[r+d];j.cells[n+l]={type:c},s.add(j)}var b=0;return s.forEach((function(e){e.cells.every((function(e){return Boolean(e.type)}))&&(e.removed=!0,b++)})),b}function ve(e,t,n,r){var c=Ne(t,n,r);ue(c,e)||(t.rotate=c.rotate,t.x=c.x,t.y=c.y)}!function(e){e.LEFT="left",e.RIGHT="right"}(je||(je={}));var pe=function(e){var t=Object(f.a)(e,2);return[t[0],t[1]+1]},xe=function(e){return e},he=function(e,t){return t},ge=(de={},Object(be.a)(de,je.LEFT,(function(e){var t=Object(f.a)(e,2);return[t[0]-1,t[1]]})),Object(be.a)(de,je.RIGHT,(function(e){var t=Object(f.a)(e,2);return[t[0]+1,t[1]]})),de),ye=(fe={},Object(be.a)(fe,je.LEFT,(function(e,t){return t===e.length-1?0:t+1})),Object(be.a)(fe,je.RIGHT,(function(e,t){return 0===t?e.length-1:t-1})),fe);function Ne(e,t,n){var r=e.x,c=e.y,a=e.type,o=e.rotate,s=me[a],i=n(s,o),u=t([r,c]),l=Object(f.a)(u,2);return{x:l[0],y:l[1],piece:s[i],rotate:i}}var ke=function(e,t){for(var n,r=t.x,c=t.y,a=t.type,o=t.rotate;;){var s,i,u=Ne({x:(null===(s=n)||void 0===s?void 0:s.x)||r,y:(null===(i=n)||void 0===i?void 0:i.y)||c,type:a,rotate:o},pe,he);if(ue(u,e))return n;n={x:u.x,y:u.y}}},_e=function(e){var t,n,r,c=(t=10,n=20,{rows:Array.from(oe(t,n)),width:t,height:n});return Object(T.a)(Object(T.a)({},O),{},{next:(r=e,Array(r).fill(null).map(ee)),buffer:c,screen:Array(c.width*c.height).fill({}),level:1,score:0,player:void 0,ghost:void 0})},we={1:function(e){return 40},2:function(e){return 100},3:function(e){return 300},4:function(e){return 1200}},Ce={1:function(e){return 80},2:function(e){return 200},3:function(e){return 600},4:function(e){return 2400}},Se={1:function(e){return 120},2:function(e){return 300},3:function(e){return 900},4:function(e){return 3600}},Te={1:function(e){return 40*(e+1)},2:function(e){return 100*(e+1)},3:function(e){return 300*(e+1)},4:function(e){return 1200*(e+1)}},Re=function(e,t,n){return function(e,t){if(0!==t){if(1===e)return we[t](e);if(2===e)return Ce[t](e);if(e>=3&&e<10)return Se[t](e);if(e>=10)return Te[t](e)}return 0}(e,n)+me[t][0].length},Ee=ne.a.mark(Me);function Me(e){var t,n,r,c,a,o,s,i;return ne.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=e.rows,n=e.width,r=e.height,c=0;case 2:if(!(c<r)){u.next=14;break}a=t[c],o=a.cells,s=a.removed,i=0;case 5:if(!(i<n)){u.next=11;break}return u.next=8,{type:o[i].type,glow:s};case 8:i++,u.next=5;break;case 11:c++,u.next=2;break;case 14:case"end":return u.stop()}}),Ee)}function Ie(e,t,n,r){var c=e.width,a=Array.from(Me(e));if(t){var o=Le(a,c,(function(e){e.type=t.type,e.ghost=.2})),s=Le(a,c,(function(e){e.type=t.type,e.ghost=void 0})),i=t.y-r,u=Le(a,c,(function(e,n,c){e.type||(e.type=t.type,e.ghost=(.2-.05)*function(e){return(e-r)/i}(c)+.05)}));me[t.type][t.rotate].forEach((function(e){var c=Object(f.a)(e,2),a=c[0],i=c[1];if(n&&o(n.x+a,n.y+i),s(t.x+a,t.y+i),void 0!==r)for(var l=r;l<t.y;l++)u(t.x+a,l+i)}))}return a}function Le(e,t,n){return function(r,c){n(e[c*t+r],r,c)}}var Pe,De,Fe=function(e,t){e.sound_tracks.push({id:e.sound_id++,src:t})};function Ae(e){var t=e.rows.findIndex((function(e){return e.removed}));return-1!==t&&(function(e,t){var n=e.rows,r=e.width;n.splice(t,1),n.unshift({cells:Array.from(ce(r))})}(e,t),!0)}!function(e){var t=function(e){return"".concat(v,"/").concat(e)};e.softDrop=Object(S.b)(t("soft_drop")),e.hardDrop=Object(S.b)(t("hard_drop")),e.start=Object(S.b)(t("start")),e.run=Object(S.b)(t("run")),e.pause=Object(S.b)(t("pause")),e.resume=Object(S.b)(t("resume")),e.quit=Object(S.b)(t("quit")),e.tick=Object(S.b)(t("tick")),e.finishing=Object(S.b)(t("finishing")),e.render=Object(S.b)(t("render")),e.bufferSet=Object(S.b)(t("bufferSet")),e.bufferPatch=Object(S.b)(t("bufferPatch")),e.patch=Object(S.b)(t("patch")),e.rotate=Object(S.b)(t("rotate")),e.move=Object(S.b)(t("move")),e.hold=Object(S.b)(t("hold")),e.soundTrack=Object(S.b)(t("soundTrack")),e.toast=Object(S.b)(t("toast"))}(Pe||(Pe={})),function(e){var t=function(e,t){i.a.event({category:v,action:e,value:t})};e.slice=Object(S.c)({name:v,initialState:O,reducers:{},extraReducers:function(e){e.addCase(Pe.softDrop,(function(e,t){var n=t.payload;e.soft_drop=n})).addCase(Pe.start,(function(e,n){var c=n.payload;t("start");var a=_e(e.next_max);return Object(T.a)(Object(T.a)({},a),{},{level:c,status:r.STARTING})})).addCase(Pe.run,(function(e,t){e.status=r.RUNNING})).addCase(Pe.pause,(function(e,n){t("pause"),e.status=r.PAUSED})).addCase(Pe.resume,(function(e,n){t("resume"),e.status=r.STARTING})).addCase(Pe.quit,(function(e){return t("quit"),_e(e.next_max)})).addCase(Pe.render,(function(e,t){e.screen=Ie(e.buffer,e.player,e.ghost)})).addCase(Pe.tick,(function(e,t){var n=t.snapshot;if(e.player){var c=function(e,t){var n=Ne(t,pe,he);return ue(n,e)?{collision:!0,lines:Oe(t,e)}:(t.y=n.y,{collision:!1})}(e.buffer,e.player),a=c.collision,o=c.lines;if(a){var s=e.level,i=function(e,t,n){return e.score=e.score+Re(e.level,t,n),e.lines_level=e.lines_level+n,e.lines_level>=e.lines_level_up?(e.lines_total+=e.lines_level,e.lines_level=0,e.level++,U):e.player_freeze?void 0:z}(e,e.player.type,o);s!==e.level&&e.level%5===0&&(e.toast_message="Level ".concat(e.level),(null===n||void 0===n?void 0:n.app.sound)&&Fe(e,V)),(null===n||void 0===n?void 0:n.app.sound)&&i&&Fe(e,i),e.player_freeze=!1,e.hold_enable=!0,e.player=void 0,e.ghost=void 0}else e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?ke(e.buffer,e.player):void 0}else if(!Ae(e.buffer)){var u=e.next.shift();e.next.length<e.next_max&&e.next.push(ee());var l=function(e,t){var n=me[e][0].some((function(e){var t=Object(f.a)(e,2);return t[0],t[1]<0}))?1:0;return{x:Math.floor(t/2),y:n,type:e,rotate:0}}(u,e.buffer.width);ue(Ne(l,xe,he),e.buffer)?((null===n||void 0===n?void 0:n.app.sound)&&Fe(e,G),e.restart_ticker++,e.status=r.FINISHING):(e.player=l,e.ghost=(null===n||void 0===n?void 0:n.app.ghost_piece)?ke(e.buffer,l):void 0)}e.screen=Ie(e.buffer,e.player,e.ghost)})).addCase(Pe.finishing,(function(e,t){t.snapshot;var n=e.buffer.rows.find((function(e){return e.removed}));if(n)e.score+=n.cells.filter((function(e){return Boolean(e.type)})).length,Ae(e.buffer);else{var c=e.buffer.rows.find((function(e){return e.cells.some((function(e){return Boolean(e.type)}))}));c?c.removed=!0:e.status=r.FINISHED}e.screen=Ie(e.buffer,e.player,e.ghost)})).addCase(Pe.hardDrop,(function(e,t){var n=t.snapshot;if(e.player&&!e.player_freeze){var r=e.player.y;!function(e,t){for(;;){var n=Ne(t,pe,he);if(ue(n,e))break;t.y=n.y}}(e.buffer,e.player),e.restart_ticker++,e.screen=Ie(e.buffer,e.player,void 0,r),e.player_freeze=!0,e.ghost=void 0,(null===n||void 0===n?void 0:n.app.sound)&&(Fe(e,B),Fe(e,z))}})).addCase(Pe.bufferSet,(function(e,t){var n=t.payload;e.buffer=n})).addCase(Pe.bufferPatch,(function(e,t){t.payload.forEach((function(t){return function(e,t){var n=t.x,r=t.y,c=Object(L.a)(t,["x","y"]);e.rows[r].cells[n]=c}(e.buffer,t)}))})).addCase(Pe.rotate,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(ve(e.buffer,e.player,xe,ye[n]),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?ke(e.buffer,e.player):void 0,e.screen=Ie(e.buffer,e.player,e.ghost))})).addCase(Pe.move,(function(e,t){var n=t.payload,r=t.snapshot;e.player&&!e.player_freeze&&(ve(e.buffer,e.player,ge[n],he),e.ghost=(null===r||void 0===r?void 0:r.app.ghost_piece)?ke(e.buffer,e.player):void 0,e.screen=Ie(e.buffer,e.player,e.ghost))})).addCase(Pe.hold,(function(e){e.player&&(e.hold&&(e.next=[e.hold].concat(Object(C.a)(e.next))),e.hold=e.player.type,e.hold_enable=!1,e.player=void 0,e.ghost=void 0,e.restart_ticker++,e.screen=Ie(e.buffer,e.player,e.ghost))})).addCase(Pe.soundTrack,(function(e,t){var n=t.payload;e.sound_tracks=e.sound_tracks.filter((function(e){return e.id!==n}))})).addCase(Pe.patch,(function(e,t){var n=t.payload,r=t.snapshot,c=(null===r||void 0===r?void 0:r.app.ghost_piece)&&e.player?ke(e.buffer,e.player):void 0,a=Ie(e.buffer,e.player,c);return Object(T.a)(Object(T.a)(Object(T.a)({},e),n),{},{ghost:c,screen:a})}))}})}(De||(De={}));var He=function(){return Object(E.b)({app:w.slice.reducer,game:De.slice.reducer})};var Ge,Ue=function(){return Object(l.b)()},ze=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=He();return Object(S.a)({devTools:{name:d.brandName,maxAge:100},preloadedState:e,reducer:t,middleware:function(e){return[].concat(Object(C.a)(e()),[R])}})}(e)},Be=n(108),Ve=n(5),Ze=n.n(Ve),Ke=(n(80),function(e){var t=e.onClose,n=void 0===t?function(){return null}:t,r=e.open,a=e.title,o=e.large,s=e.children,l=e.className,d=Object(u.a)("(max-width:375px)"),f=Object(c.useMemo)((function(){return o&&d}),[o,d]);return function(e,t){Object(c.useEffect)((function(){var n;e&&i.a.modalview((n=t)&&n.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("-"))}),[e,t])}(r,a),Object(A.jsxs)(Be.a,{className:Ze()("ui-dialog",{fullScreen:f}),PaperProps:{className:Ze()("ui-dialog-paper",l,{"border-primary":!f,fullScreen:f})},open:r,onClose:n,fullScreen:f,children:[Object(A.jsxs)("div",{className:"ui-dialog-title text-primary",children:[a,o&&Object(A.jsx)("button",{className:"ml:hidden flex absolute top-0 -left-3 p-3 dark:text-white text-black text-sm",onClick:n,children:Object(A.jsx)(F.a,{})})]}),Object(A.jsx)("div",{className:"flex flex-col",children:s})]})}),We=function(e){var t=e.closeAction,n=void 0===t?_.close():t,r=e.selectOpen,c=e.title,a=e.large,o=e.children,s=e.className,i=Ue(),u=Object(l.c)(r);return Object(A.jsx)(Ke,{className:s,open:Boolean(u),title:c,large:a,onClose:function(){return i(n)},children:o})},Je=function(e){var t=e.credits,n=e.className;return Object(A.jsx)("div",{className:Ze()(n,"flex flex-col text-xs -mb-3"),children:t.map((function(e,t){var n=e.title,r=e.desc,c=e.url;return Object(A.jsxs)("div",{className:"flex flex-col mb-3",children:[Object(A.jsxs)("div",{children:[n,":"]}),Object(A.jsx)("a",{href:c,className:"text-primary hover:underline",children:r})]},t)}))})},Ye=[{title:"UX Design by",desc:"Zayn Assalam",url:"https://dribbble.com/shots/14684127-Tetris-Mobile-App"},{title:"Programmed by",desc:"Nick Foscarini",url:"https://www.linkedin.com/in/nick-foscarini/"},{title:"Built with",desc:"ReactJS",url:"https://reactjs.org/"},{title:"States managed by",desc:"Redux Toolkit",url:"https://redux-toolkit.js.org/"},{title:"Styled with",desc:"tailwindcss",url:"https://tailwindcss.com/"},{title:"Source code",desc:"GitHub",url:d.github}],qe=function(e){var t=e.selectOpen,n=void 0===t?g.isOpen(p.CREDITS):t;return Object(A.jsx)(We,{className:"max-w-[12rem]",title:"Credits",selectOpen:n,children:Object(A.jsx)(Je,{credits:Ye})})},Qe=n(61),Xe=n(60),$e=n(110),et=Object(c.createContext)({transparent:!1,large:!1}),tt=function(){return Object(c.useContext)(et)},nt=function(e){var t=e.transparent,n=e.large,r=e.children,a=Object(c.useMemo)((function(){return{transparent:t,large:n}}),[t,n]);return Object(A.jsx)(et.Provider,{value:a,children:r})};n(81);!function(e){e[e.NORMAL=0]="NORMAL",e[e.ROUND=1]="ROUND",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN"}(Ge||(Ge={}));var rt=function(e){var t=e.active,n=e.disabled,r=e.preventFocus,a=e.primary,o=e.secondary,s=e.toolTip,i=e.shape,u=void 0===i?Ge.NORMAL:i,l=e.className,d=e.children,f=(e.onMouseDown,e.onMouseUp,e.onPress),j=e.onRelease,b=Object(L.a)(e,["active","disabled","preventFocus","primary","secondary","toolTip","shape","className","children","onMouseDown","onMouseUp","onPress","onRelease"]),m=Object(c.useRef)(!1),O=Object(c.useRef)(!1),v=tt().transparent,p=Object(c.useMemo)((function(){return Ze()(l,"ui-button",{"ui-button-standard":!v,"ui-button-trans":v,"ui-shape-round":u===Ge.ROUND,"ui-shape-normal":u===Ge.NORMAL,"ui-shape-left":u===Ge.LEFT,"ui-shape-right":u===Ge.RIGHT,"ui-shape-up":u===Ge.UP,"ui-shape-down":u===Ge.DOWN,"text-primary":a,"text-secondary":o,active:t})}),[t,a,o,u,v,l]);return Object(A.jsx)($e.a,{title:s||"",children:Object(A.jsx)("button",Object(T.a)(Object(T.a)({className:p,disabled:n,onTouchStart:function(){m.current=!0,n||(O.current=!0,f&&f())},onTouchEnd:function(){O.current=!1,j&&j()},onMouseDown:function(e){r&&e.preventDefault(),m.current||n||(O.current=!0,f&&f())},onMouseUp:function(e){m.current||(O.current=!1,j&&j())},onMouseLeave:function(e){!m.current&&O.current&&(O.current=!1,j&&j())}},b),{},{children:d}))})},ct=function(e){var t=e.tools,n=e.className,r=Ue();return Object(A.jsx)("div",{className:Ze()(n,"flex justify-between w-full"),children:t.map((function(e,t){var n=e.icon,c=e.toolTip,a=e.active,o=e.action;return Object(A.jsx)(rt,{className:"rounded-full text-[12px] p-2",primary:!0,active:a,onClick:function(){return r(o)},toolTip:c,children:n},t)}))})},at=function(e){var t,n=e.value,r=e.digits,a=e.primary,o=void 0===a||a,s=e.className,i=function(e){return Object(c.useMemo)((function(){return"0".repeat(e)}),[e])}(r),u=function(e,t){return Object(c.useMemo)((function(){var n=e.toString();return n.length>t?"9".repeat(t):n}),[e,t])}(n,r),l=(t=r-u.length,Object(c.useMemo)((function(){return{__html:"&nbsp;".repeat(t)}}),[t])),d=Object(c.useMemo)((function(){return{"text-primary":o,"text-secondary":!o}}),[o]);return Object(A.jsx)("div",{className:Ze()(s,"flex relative leading-none font-digits p-2"),children:Object(A.jsxs)("div",{className:"relative mx-auto",children:[Object(A.jsx)("div",{className:Ze()("opacity-20",d),children:i}),Object(A.jsxs)("div",{className:Ze()("absolute top-0 left-0",d),children:[Object(A.jsx)("span",{dangerouslySetInnerHTML:l}),Object(A.jsx)("span",{children:u})]})]})})},ot=function(e){var t=e.rank,n=e.score,r=e.className;return Object(A.jsxs)("div",{className:Ze()(r,"flex font-mono items-baseline space-x-4"),children:[Object(A.jsxs)("div",{className:"text-light",children:["#",t]}),Object(A.jsx)(at,{digits:6,value:n})]})},st=function(e){var t=e.actionHome,n=void 0===t?Pe.quit():t,r=e.actionRestart,a=void 0===r?Pe.start(1):r,o=e.actionHighScores,s=void 0===o?_.open(p.HIGH_SCORES):o,i=e.className,u=Object(l.c)(m.score),d=Object(l.c)(g.highScores),f=Ue();Object(c.useEffect)((function(){f(_.recordScore(u))}),[f,u]);var j=Object(c.useMemo)((function(){return[{icon:Object(A.jsx)(F.j,{}),toolTip:"Home",action:n},{icon:Object(A.jsx)(Xe.a,{}),toolTip:"Restart",action:a},{icon:Object(A.jsx)(Qe.a,{}),toolTip:"High Scores",action:s}]}),[n,a,s]),b=Object(c.useMemo)((function(){return d.indexOf(u)+1}),[d,u]);return Object(A.jsxs)("div",{className:Ze()(i,"flex flex-col text-2xl"),children:[Object(A.jsxs)("div",{className:"flex flex-col ml-auto mr-auto",children:[Object(A.jsx)("div",{className:"font-mono text-center",children:"Your Score"}),Object(A.jsx)(ot,{rank:b,score:u}),Object(A.jsx)("div",{className:"font-mono text-center mt-5",children:"Your Best"}),Object(A.jsx)(ot,{rank:1,score:d[0]||0})]}),Object(A.jsx)(ct,{className:"mt-5",tools:j})]})},it=function(e){var t=e.selectStart,n=void 0===t?g.startLevel:t,r=e.selectOpen,c=void 0===r?m.finished:r,a=Object(l.c)(n);return Object(A.jsx)(We,{className:"max-w-[12rem]",title:"Game Over",selectOpen:c,children:Object(A.jsx)(st,{actionRestart:Pe.start(a)})})},ut=function(e){var t=e.selectScores,n=void 0===t?g.highScores:t,r=e.className,a=Object(l.c)(n),o=Object(c.useMemo)((function(){return[].concat(Object(C.a)(a||[]),Object(C.a)(Array(10).fill(0))).slice(0,9)}),[a]);return Object(A.jsx)("div",{className:Ze()(r,"flex flex-col text-2xl"),children:o.map((function(e,t){return Object(A.jsx)(ot,{rank:t+1,score:e},t)}))})},lt=function(e){var t=e.selectOpen,n=void 0===t?g.isOpen(p.HIGH_SCORES):t;return Object(A.jsx)(We,{className:"max-w-[12rem]",title:"High Scores",selectOpen:n,children:Object(A.jsx)(ut,{className:"ml-auto mr-auto"})})},dt=function(e){var t=e.className;return Object(A.jsxs)("div",{className:Ze()(t,"flex text-xs space-x-2"),children:[Object(A.jsxs)("div",{children:["Version ",d.version]}),Object(A.jsxs)("a",{href:d.github,className:"flex text-primary hover:underline items-center space-x-1",children:[Object(A.jsx)(F.i,{}),Object(A.jsx)("span",{children:"Source"})]})]})},ft=function(e){var t=e.value,n=e.onChange,r=e.iconOn,a=e.iconOff,o=e.className,s=Object(c.useMemo)((function(){var e=r||Object(A.jsx)(F.c,{className:"text-green-200"});return Object(c.cloneElement)(e,{className:"text-[24px] mr-1 ".concat(e.props.className)})}),[r]),i=Object(c.useMemo)((function(){var e=a||Object(A.jsx)(F.n,{className:"text-red-500"});return Object(c.cloneElement)(e,{className:"text-[24px] ".concat(e.props.className)})}),[a]);return Object(A.jsxs)("div",{className:Ze()(o,"flex relative p-1 text-[26px] h-[26px] w-[50px] bg-black rounded-full cursor-pointer items-center justify-between"),onClick:function(){return n(!t)},children:[s,i,Object(A.jsx)("div",{className:Ze()("bg-white rounded-full absolute top-[2px] left-[2px] h-[22px] w-[22px] transition-transform transform translate-x-0",{"translate-x-[24px]":Boolean(t)})})]})},jt=function(e){var t=e.selectDark,n=void 0===t?g.dark:t,r=e.className,c=Object(l.c)(n),a=Ue();return Object(A.jsx)(ft,{className:r,onChange:function(e){return a(_.dark(e))},value:c,iconOn:Object(A.jsx)(F.k,{className:"text-blue-200"}),iconOff:Object(A.jsx)(F.m,{className:"text-yellow-500"})})};function bt(e){var t,n=e.onChange,r=e.options,a=e.value,o=Object(c.useMemo)((function(){return r.findIndex((function(e){return e.value===a}))}),[a,r]),s=Object(c.useCallback)((function(){var e=Math.min(r.length-1,o+1);n(r[e].value)}),[n,r,o]),i=Object(c.useCallback)((function(){var e=Math.max(0,o-1);n(r[e].value)}),[n,r,o]);return Object(A.jsxs)("div",{className:"flex",children:[Object(A.jsx)(rt,{className:"px-4",onClick:i,disabled:o<=0,children:"-"}),Object(A.jsx)("div",{className:"flex-grow text-center",children:null===(t=r[o])||void 0===t?void 0:t.label}),Object(A.jsx)(rt,{className:"px-4",onClick:s,disabled:o>=r.length-1,children:"+"})]})}var mt,Ot,vt=function(){var e=Object(l.c)(g.music),t=Object(l.c)(g.musicType),n=Object(l.c)(g.musicVolume),r=Object(l.c)(g.sound),c=Object(l.c)(g.soundVolume),a=Ue();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Sound Fx"}),Object(A.jsx)(rt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:r,onClick:function(){return a(_.sound())},children:J[r.toString()]}),Object(A.jsx)("div",{children:"Sound Fx Volume"}),Object(A.jsx)(bt,{options:K,value:c,onChange:function(e){return a(_.soundVolume(e))}}),Object(A.jsx)("div",{children:"Music"}),Object(A.jsx)(rt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return a(_.music())},children:q[e.toString()]}),Object(A.jsx)("div",{children:"Music Volume"}),Object(A.jsx)(bt,{options:K,value:n,onChange:function(e){return a(_.musicVolume(e))}}),Object(A.jsx)("div",{children:"Music Type"}),Object(A.jsx)(bt,{options:W,value:t,onChange:function(e){return a(_.musicType(e))}})]})},pt=function(){var e=Object(l.c)(g.ghostPiece),t=Ue();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Ghost Piece"}),Object(A.jsx)(rt,{className:"flex rounded-full text-[12px] p-2 justify-center",active:e,onClick:function(){return t(_.ghostPiece())},children:e?Object(A.jsx)(F.c,{}):Object(A.jsx)(F.n,{})})]})},xt=["Digit","Key","Arrow"],ht=function(e){var t=e.label,n=e.keyCode,r=e.onClick,a=Object(c.useMemo)((function(){return function(e){return e&&e.replace(/[-_]/g," ").replace(/([A-Z])/g," $1")}(xt.reduce((function(e,t){return e.replace(t,"").trim()}),n))}),[n]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:t}),Object(A.jsx)(rt,{className:"w-full",onClick:r,children:a})]})},gt=function(e){var t=e.keyOf,n=e.onChange;return Object(c.useEffect)((function(){var e=function(e){var t=e.code;return n(t)};return document.addEventListener("keydown",e,{once:!0}),function(){return document.removeEventListener("keydown",e)}})),Object(A.jsx)("div",{className:"text-2xl font-bold text-center w-full uppercase",children:h[t]})},yt=function e(t){var n=t.selectKeys,r=void 0===n?g.keys:n,a=t.actionKeys,o=void 0===a?_.keys:a,s=Object(c.useState)(),i=Object(f.a)(s,2),u=i[0],d=i[1],j=Object(l.c)(r),b=Ue(),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";return Object(c.useMemo)((function(){return I(e,t)}),[e,t])}(e.name);return Object(A.jsxs)(A.Fragment,{children:[x.map((function(e,t){return Object(A.jsx)(ht,{keyCode:j[e],label:h[e],onClick:function(){return d(e)}},t)})),Object(A.jsxs)(Ke,{className:"max-w-[22rem]",title:"Press Key",open:Boolean(u),onClose:function(){return d(void 0)},children:[Object(A.jsx)(gt,{keyOf:u,onChange:function(e){m({pickKey:u,code:e}),b(o({keyOf:u,code:e})),d(void 0)}}),Object(A.jsx)(rt,{className:"mt-5 ml-auto mr-auto px-6 py-2",primary:!0,onClick:function(){return d(void 0)},children:"Cancel"})]})]})},Nt=function(e){var t=e.darkMode,n=e.className,r=Ue();return Object(A.jsxs)("div",{className:Ze()(n,"flex flex-col"),children:[Object(A.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[Object(A.jsx)(yt,{}),Object(A.jsx)(pt,{}),Object(A.jsx)(vt,{}),Object(A.jsx)(rt,{className:"mt-3 py-2",onClick:function(){return r(_.resetScore())},children:"Reset High Scores"}),Object(A.jsx)(rt,{className:"mt-3 py-2",onClick:function(){return r(_.resetOptions())},children:"Reset Options"})]}),t&&Object(A.jsx)(jt,{className:"ml-auto mr-auto mt-5"})]})},kt=function(e){var t=e.selectWelcoming,n=void 0===t?m.welcoming:t,r=e.selectOpen,c=void 0===r?g.isOpen(p.OPTIONS):r,a=Object(l.c)(n);return Object(A.jsxs)(We,{className:"max-w-[22rem]",title:"Options",large:!0,selectOpen:c,children:[Object(A.jsx)(Nt,{darkMode:!a}),Object(A.jsx)(dt,{className:"mt-auto mx-auto mt-5"})]})},_t=function(e){var t=e.items,n=e.className,r=Ue();return Object(A.jsx)("div",{className:Ze()(n,"flex flex-col"),children:t.map((function(e,t){var n=e.action,c=e.active,a=e.title;return Object(A.jsx)(rt,{className:"py-2 px-4 mb-4",primary:c,onClick:function(){return r(n)},children:a},t)}))})},wt=function(e){var t=e.selectMusic,n=void 0===t?g.music:t,r=e.selectSound,a=void 0===r?g.sound:r,o=e.selectStart,s=void 0===o?g.startLevel:o,i=e.closeAction,u=void 0===i?Pe.resume():i,d=e.selectOpen,f=void 0===d?m.paused:d,j=Object(l.c)(n),b=Object(l.c)(a),O=Object(l.c)(s),v=Object(c.useMemo)((function(){return[{icon:J[b.toString()],toolTip:Y[b.toString()],active:b,action:_.sound()},{icon:q[j.toString()],toolTip:Q[j.toString()],active:j,action:_.music()},{icon:Object(A.jsx)(F.h,{}),toolTip:"Options",action:_.open(p.OPTIONS)}]}),[j,b]),x=Object(c.useMemo)((function(){return[{title:"Continue",action:Pe.resume(),active:!0},{title:"Restart",action:Pe.start(O)},{title:"Quit Game",action:Pe.quit()}]}),[O]);return Object(A.jsxs)(We,{className:"max-w-[12rem]",title:"Paused",selectOpen:f,closeAction:u,children:[Object(A.jsx)(_t,{className:"mb-5",items:x}),Object(A.jsx)(ct,{tools:v})]})},Ct=function(e){Object(c.useEffect)((function(){i.a.pageview(e)}),[e])},St=(mt={},Object(be.a)(mt,r.WELCOME,"Welcome"),Object(be.a)(mt,r.STARTING,"Starting"),Object(be.a)(mt,r.RUNNING,"Playing"),Object(be.a)(mt,r.PAUSED,"Paused"),Object(be.a)(mt,r.FINISHING,"Game Over"),Object(be.a)(mt,r.FINISHED,"Game Over"),mt),Tt=function(e){var t=e.label,n=e.reverse,r=void 0!==n&&n,c=e.className,a=e.children,o=tt().transparent;return Object(A.jsxs)("div",{className:Ze()(c,"flex items-center w-full",{"flex-col":!r,"flex-col-reverse":r}),children:[Object(A.jsx)("div",{className:"flex text-light mb-1",children:t}),Object(A.jsx)("div",{className:Ze()("flex w-full flex-col rounded-lg",{"border border-gray-200 dark:border-gray-600":o,"dark:nm-inset-gray-800 nm-inset-gray-100":!o}),children:a})]})},Rt=(n(83),Ot={},Object(be.a)(Ot,D.I,"color-i"),Object(be.a)(Ot,D.O,"color-o"),Object(be.a)(Ot,D.T,"color-t"),Object(be.a)(Ot,D.S,"color-s"),Object(be.a)(Ot,D.Z,"color-z"),Object(be.a)(Ot,D.J,"color-j"),Object(be.a)(Ot,D.L,"color-l"),Ot),Et=function(e){var t=e.ghost,n=e.glow,r=e.grid,a=e.speed,o=e.type,s=Object(c.useMemo)((function(){var e={};return o&&n&&a&&(e.animationDuration="".concat(a,"ms")),t&&(e.opacity="".concat(t)),e}),[o,n,a,t]);return Object(A.jsx)("div",{className:Ze()("game-block",{"game-block-border":r}),"data-testid":"game-block",children:Object(A.jsx)("div",{className:Ze()("block-color relative w-full h-full rounded-sm",!n&&o&&Rt[o],{"color-glow":o&&n,ghost:o&&t,fill:o&&!t}),style:s})})},Mt=function(e){var t=e.center,n=void 0===t?[2,1]:t,r=e.grid,a=void 0===r||r,o=e.count,s=void 0===o?4:o,i=e.type,u=void 0===i?D.Z:i,l=e.values,d=e.className,j=Object(c.useMemo)((function(){var e=Object(f.a)(n,2),t=e[0],r=e[1],c=Array(s*s).fill(void 0);return null===l||void 0===l||l.forEach((function(e){var n=Object(f.a)(e,2),a=n[0],o=n[1];return c[o*s+a+t+r*s]=u})),c}),[s,n,u,l]);return Object(A.jsx)("div",{className:Ze()(d,"grid w-full min-w-full",{"game-grid":a}),style:{gridTemplateColumns:"repeat(".concat(s,", minmax(0, 1fr))")},children:j.map((function(e,t){return Object(A.jsx)(Et,{type:e,grid:a},t)}))})},It=function(e){var t=e.label,n=e.reverse,r=void 0!==n&&n,c=e.selectPieces,a=e.className,o=Object(l.c)(c);return Object(A.jsx)(Tt,{label:t,reverse:r,children:Object(A.jsx)("div",{className:Ze()(a,"flex flex-col relative w-full"),children:o.map((function(e,t){return Object(A.jsx)(Mt,{values:e?me[e][0]:void 0,type:e,grid:!1},t)}))})})},Lt=n(62),Pt=function(e){var t=e.keyCode,n=e.onPress,r=e.onRelease;return Object(c.useEffect)((function(){var e=function(e){e.repeat||e.code!==t||("keydown"===e.type&&n&&n(),"keyup"===e.type&&r&&r())};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[t,n,r]),null},Dt=function(e){var t=e.disabled,n=e.keyCode,r=e.onHold,a=e.className,o=Object(c.useState)(!1),s=Object(f.a)(o,2),i=s[0],u=s[1],l=tt().large;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(rt,{"data-testid":"game-hold",className:Ze()(a,"flex text-sm",{"p-2":!l,"p-3":l}),preventFocus:!0,disabled:t,active:i&&!t,shape:Ge.ROUND,onClick:function(){return r()},children:Object(A.jsx)(Lt.a,{})}),Object(A.jsx)(Pt,{keyCode:n,onPress:function(){!t&&r(),u(!0)},onRelease:function(){u(!1)}})]})},Ft=n(51),At=function(e){var t=e.disabled,n=e.keyCodeLeft,r=e.keyCodeRight,a=e.onRotateLeft,o=e.onRotateRight,s=e.className,i=Object(c.useState)(!1),u=Object(f.a)(i,2),l=u[0],d=u[1],j=Object(c.useState)(!1),b=Object(f.a)(j,2),m=b[0],O=b[1],v=tt().large,p=Object(c.useMemo)((function(){return Ze()(s,"flex text-lg items-center justify-center",{"w-14 h-14":!v,"w-16 h-16":v})}),[s,v]);return Object(A.jsxs)("div",{className:"flex gap-4 my-auto",children:[Object(A.jsx)(rt,{"data-testid":"game-rotate-left",className:p,preventFocus:!0,disabled:t,active:l,shape:Ge.LEFT,onPress:a,children:Object(A.jsx)(Ft.a,{})}),Object(A.jsx)(rt,{"data-testid":"game-rotate-right",className:p,preventFocus:!0,disabled:t,active:m,shape:Ge.RIGHT,onPress:o,children:Object(A.jsx)(Ft.b,{})}),!t&&Object(A.jsx)(Pt,{keyCode:n,onPress:function(){a(),d(!0)},onRelease:function(){d(!1)}}),!t&&Object(A.jsx)(Pt,{keyCode:r,onPress:function(){o(),O(!0)},onRelease:function(){O(!1)}})]})},Ht=function(e){var t=e.className,n=Object(l.c)(m.paused),r=Ue(),c=tt().large;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(rt,{"data-testid":"game-settings",className:Ze()(t,"flex text-sm",{"p-2":!c,"p-3":c}),disabled:n,preventFocus:!0,primary:!0,shape:Ge.ROUND,onClick:function(){return r(Pe.pause())},children:Object(A.jsx)(F.b,{})}),!n&&Object(A.jsx)(Pt,{keyCode:"Escape",onPress:function(){return r(Pe.pause())}})]})},Gt=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onDrop,o=e.shape,s=e.className,i=Object(c.useState)(!1),u=Object(f.a)(i,2),l=u[0],d=u[1],j=tt().large;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(rt,{className:Ze()(s,"items-center justify-center",{"p-4":!j,"p-5":j}),disabled:t,preventFocus:!0,shape:o,active:l,"data-testid":"game-soft-drop",onPress:function(){return a(!0)},onRelease:function(){return a(!1)},children:n}),!t&&Object(A.jsx)(Pt,{keyCode:r,onPress:function(){a(!0),d(!0)},onRelease:function(){a(!1),d(!1)}})]})},Ut=function(e){var t=e.emitFirst,n=e.disabled,r=e.onRepeat,a=e.speed;return Object(c.useEffect)((function(){if(!n&&(t&&r(),a>0)){var e=setInterval((function(){return r()}),a);return function(){return clearInterval(e)}}}),[t,n,r,a]),null},zt=function(e){var t=e.disabled,n=e.icon,r=e.keyCode,a=e.onMove,o=e.speed,s=void 0===o?500:o,i=e.shape,u=e.className,l=Object(c.useState)(0),d=Object(f.a)(l,2),j=d[0],b=d[1],m=Object(c.useState)(!1),O=Object(f.a)(m,2),v=O[0],p=O[1],x=tt().large;Object(c.useEffect)((function(){v&&1!==j&&a()}),[v,j,a]);var h=Object(c.useCallback)((function(){p(!0),b(0)}),[]),g=Object(c.useCallback)((function(){return p(!1)}),[]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(rt,{"data-testid":"game-move",className:Ze()("items-center justify-center",u,{"p-4":!x,"p-5":x}),preventFocus:!0,disabled:t,active:v,shape:i,onPress:function(){return h()},onRelease:function(){return g()},children:n}),!t&&Object(A.jsx)(Pt,{keyCode:r,onPress:h,onRelease:g}),!t&&Object(A.jsx)(Ut,{onRepeat:function(){return b(j+1)},disabled:!v,speed:s})]})},Bt=function(e){var t=e.disabled,n=e.hardDrop,r=e.left,c=e.right,a=e.softDrop,o=e.onHardDrop,s=e.onLeft,i=e.onRight,u=e.onSoftDrop,l=e.speed,d=void 0===l?500:l,f=e.className;return Object(A.jsxs)("div",{className:Ze()(f,"grid grid-cols-3 gap-1"),children:[Object(A.jsx)(Gt,{className:"col-start-2",disabled:t,icon:Object(A.jsx)(F.g,{}),keyCode:n,onDrop:function(e){e&&o()},shape:Ge.UP}),Object(A.jsx)(zt,{className:"col-start-1",disabled:t,icon:Object(A.jsx)(F.e,{}),keyCode:r,onMove:s,speed:d,shape:Ge.LEFT}),Object(A.jsx)(zt,{className:"col-start-3",disabled:t,icon:Object(A.jsx)(F.f,{}),keyCode:c,onMove:i,speed:d,shape:Ge.RIGHT}),Object(A.jsx)(Gt,{className:"col-start-2",disabled:t,icon:Object(A.jsx)(F.d,{}),keyCode:a,onDrop:u,shape:Ge.DOWN})]})},Vt=function(e){var t=e.selectKeys,n=void 0===t?g.keys:t,r=e.selectRepeatSpeed,c=void 0===r?m.repeatSpeed:r,a=e.selectEnabled,o=void 0===a?m.running:a,s=e.selectHoldEnabled,i=void 0===s?m.holdEnabled:s,u=e.transparent,d=e.className,f=Object(l.c)(n),j=f.left,b=f.right,O=f.rotate_left,v=f.rotate_right,p=f.soft_drop,x=f.hard_drop,h=f.hold,y=Object(l.c)(c),N=Object(l.c)(o),k=Object(l.c)(i),_=Ue(),w=tt().large;return Object(A.jsx)("div",{className:Ze()(d,"flex relative"),children:Object(A.jsxs)(nt,{transparent:Boolean(u),large:w,children:[Object(A.jsx)(Bt,{disabled:!N,left:j,right:b,softDrop:p,hardDrop:x,onLeft:function(){return _(Pe.move(je.LEFT))},onRight:function(){return _(Pe.move(je.RIGHT))},onSoftDrop:function(e){return _(Pe.softDrop(e))},onHardDrop:function(){return _(Pe.hardDrop())},speed:y}),Object(A.jsxs)("div",{className:"flex relative ml-auto",children:[Object(A.jsx)(Dt,{className:"absolute top-0 left-0",keyCode:h,disabled:!N||!k,onHold:function(){_(Pe.hold()),_(Pe.tick())}}),Object(A.jsx)(At,{disabled:!N,keyCodeLeft:O,keyCodeRight:v,onRotateLeft:function(){return _(Pe.rotate(je.LEFT))},onRotateRight:function(){return _(Pe.rotate(je.RIGHT))}})]}),Object(A.jsx)(Ht,{className:"absolute top-0 right-0"})]})})},Zt=function(e,t,n){var r=Object(c.useMemo)((function(){return[e,t].concat(Object(C.a)(n))}),[e,t,n]);Object(c.useEffect)((function(){var n=setInterval((function(){return e()}),t);return function(){return clearInterval(n)}}),r)},Kt=function(e){var t=e.speed,n=e.onTick;return Zt((function(){return n()}),t,[t,n]),null},Wt=function(e){var t=e.count,n=e.onStart,r=e.className,a=Object(c.useState)((function(){return t})),o=Object(f.a)(a,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){if(s>0){var e=setInterval((function(){return i(s-1)}),1e3);return function(){return clearInterval(e)}}0===s&&n()}),[s,n]),Object(A.jsx)("div",{"data-testid":"game-timer",className:Ze()(r,"flex font-mono items-center justify-center text-9xl"),children:s>0?s:""})};Wt.defaultProps={count:3};var Jt=function(e){var t=e.indx,n=Object(l.c)(m.screenCell(t)),r=Object(l.c)(m.speed);return n?Object(A.jsx)(Et,{type:n.type,glow:n.glow,ghost:n.ghost,speed:r,grid:!0}):null},Yt=(n(84),function(e){var t=e.className,n=Object(l.c)(m.size),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return Array(a*o).fill(null)}),[a,o]);return Object(A.jsx)("div",{className:Ze()(t,"game-grid ml-auto mr-auto w-full min-w-full min-h-full"),style:{gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))")},children:s.map((function(e,t){return Object(A.jsx)(Jt,{indx:t},t)}))})}),qt=function(e){var t=e.autoPlay,n=void 0===t||t,r=e.loop,a=e.onDone,o=e.onLoaded,s=e.src,i=e.volume,u=Object(c.useRef)(null);return Object(c.useEffect)((function(){i&&(u.current.volume=i)}),[u,i]),Object(A.jsx)("audio",{src:s,ref:u,autoPlay:n,controls:!1,loop:Boolean(r),onEnded:function(){return a&&a()},onCanPlayThrough:function(){return o&&o()}})},Qt=function(){var e=Object(l.c)(g.music),t=Object(l.c)(g.musicVolume),n=Object(l.c)(g.musicType);return Object(A.jsx)(A.Fragment,{children:e&&Object(A.jsx)(qt,{src:H[n],volume:t/100,loop:!0})})},Xt=function(e){var t=e.sources,n=e.onLoaded,r=Object(c.useMemo)((function(){var e=t.map((function(e){return[e,!1]}));return new Map(e)}),[t]),a=Object(c.useCallback)((function(e){r.set(e,!0),Array.from(r.values()).every((function(e){return e}))&&n()}),[r,n]);return Object(A.jsx)(A.Fragment,{children:Array.from(r.keys()).map((function(e){return Object(A.jsx)(qt,{src:e,autoPlay:!1,onLoaded:function(){return a(e)}},e)}))})},$t=function(e){var t=e.onLoaded,n=e.className,r=Object(l.c)(g.musicType),a=Object(c.useMemo)((function(){return[].concat(Object(C.a)(Z),[H[r]])}),[r]);return Object(A.jsxs)("div",{"data-testid":"game-loader",className:Ze()(n,"flex font-mono items-center justify-center text-2xl"),children:["Loading",Object(A.jsx)(Xt,{sources:a,onLoaded:t})]})},en=function(){var e=Object(l.c)(g.sound),t=Object(l.c)(g.soundVolume),n=Object(l.c)(m.soundTracks),r=Ue();return Object(A.jsx)(A.Fragment,{children:e&&n.map((function(e){var n=e.id,c=e.src;return Object(A.jsx)(qt,{src:c,volume:t/100,onDone:function(){return r(Pe.soundTrack(n))}},n)}))})},tn=function(e){var t=e.message,n=e.className;return Object(A.jsx)("div",{"data-testid":"game-toast",className:Ze()(n,"flex font-mono items-center justify-center text-4xl"),children:t})},nn=function(e){var t=e.className,n=Object(c.useState)(!1),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useState)(!1),i=Object(f.a)(s,2),u=i[0],d=i[1],j=Ue(),b=function(){var e=function(){return"visible"===document.visibilityState},t=Object(c.useState)(e()),n=Object(f.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t=function(){return a(e())};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}),[]),r}(),O=Object(l.c)(m.starting),v=Object(l.c)(m.running),p=Object(l.c)(m.finishing),x=Object(l.c)(m.restartTicker),h=Object(l.c)(m.toastMessage),g=Object(l.c)(m.speed);Object(c.useEffect)((function(){if(h){d(!0);var e=setTimeout((function(){d(!1)}),1e3);return function(){d(!1),clearTimeout(e)}}}),[h]),Object(c.useEffect)((function(){b||j(Pe.pause())}),[b,j]);var y=tt().transparent;return Object(A.jsxs)("div",{className:Ze()(t,"flex relative overflow-hidden rounded-lg desktop:p-4 w-full",{"border border-gray-200 dark:border-gray-600":y,"dark:nm-inset-gray-800 nm-inset-gray-100":!y}),children:[Object(A.jsx)(Yt,{}),v&&Object(A.jsx)(Qt,{}),Object(A.jsx)(en,{}),O&&!a&&Object(A.jsx)($t,{className:"absolute w-full h-full -m-4",onLoaded:function(){return o(!0)}}),O&&a&&Object(A.jsx)(Wt,{className:"absolute w-full h-full -m-4",onStart:function(){return j(Pe.run())}}),u&&Object(A.jsx)(tn,{className:"absolute w-full h-full -m-4",message:h}),v&&[x].map((function(e){return Object(A.jsx)(Kt,{speed:g,onTick:function(){return j(Pe.tick())}},e)})),p&&Object(A.jsx)(Kt,{speed:50,onTick:function(){return j(Pe.finishing())}})]})},rn=function(e){var t=e.label,n=e.primary,r=e.reverse,c=void 0!==r&&r,a=e.value;return Object(A.jsx)(Tt,{label:t,reverse:c,children:Object(A.jsx)(at,{className:"text-[1.25rem] h-[1.9rem] sm:text-2xl sm:h-[2.5rem]",digits:7,primary:n,value:a})})},cn=function(e){var t=e.reverse,n=void 0!==t&&t,r=e.className,c=Object(l.c)(m.score),a=Object(l.c)(m.level),o=Object(l.c)(m.lines);return Object(A.jsxs)("div",{className:Ze()(r,"flex"),children:[Object(A.jsx)(rn,{label:"Score",value:c,reverse:n}),Object(A.jsx)(rn,{label:"Level",value:a,reverse:n,primary:!1}),Object(A.jsx)(rn,{label:"Lines",value:o,reverse:n,primary:!1})]})},an=function(e){var t=e.floatControls;return Ct("/game/desktop"),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"grid grid-cols-desktop gap-4 m-auto",children:[Object(A.jsxs)("div",{className:"flex flex-col",children:[Object(A.jsx)(It,{reverse:!0,className:"p-4",label:"Hold",selectPieces:m.hold}),Object(A.jsx)(cn,{className:"flex-col mt-auto gap-4"})]}),Object(A.jsx)(nn,{}),Object(A.jsx)("div",{className:"flex flex-col",children:Object(A.jsx)(It,{className:"p-4",label:"Next",reverse:!0,selectPieces:m.next})}),!t&&Object(A.jsx)(Vt,{className:"col-start-2 mt-5"})]}),t&&Object(A.jsx)("div",{className:"flex absolute bottom-0 mb-5 w-full",children:Object(A.jsx)("div",{className:"grid grid-cols-desktop gap-4 mx-auto",children:Object(A.jsx)(Vt,{className:"col-start-2",transparent:!0})})})]})},on=function(){return Ct("/game/mobile"),Object(A.jsxs)("div",{className:"flex flex-col p-4",children:[Object(A.jsx)(cn,{className:"mx-auto gap-2",reverse:!0}),Object(A.jsxs)("div",{className:"grid grid-cols-mobile gap-2 mx-auto",children:[Object(A.jsx)("div",{className:"flex flex-col",children:Object(A.jsx)(It,{className:"p-1",label:"Hold",reverse:!0,selectPieces:m.hold})}),Object(A.jsx)(nn,{}),Object(A.jsx)("div",{className:"flex flex-col",children:Object(A.jsx)(It,{className:"p-1",label:"Next",reverse:!0,selectPieces:m.next})})]}),Object(A.jsx)("div",{className:"flex absolute bottom-14 left-4 right-4",children:Object(A.jsx)(Vt,{className:"w-full",transparent:!0})})]})},sn=ne.a.mark(bn),un=ne.a.mark(mn),ln=ne.a.mark(On),dn=ne.a.mark(vn),fn=ne.a.mark(pn),jn=["text-tetro_i-400","text-tetro_o-400","text-tetro_t-400","text-tetro_s-400","text-tetro_z-400","text-tetro_j-400","text-tetro_l-400"];function bn(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(jn,"t0",1);case 1:case"end":return e.stop()}}),sn)}function mn(e){var t;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=9;break}return n.next=4,"dark:text-gray-200 text-gray-300";case 4:return n.next=6,"dark:text-gray-600 text-gray-800";case 6:t++,n.next=1;break;case 9:case"end":return n.stop()}}),un)}function On(e){var t;return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<e)){n.next=7;break}return n.next=4,jn[$(jn.length)];case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),ln)}function vn(e,t,n){var r,c,a,o;return ne.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=jn.map((function(e){return[e,e,e]})).flat(),c=e,a=e+t,o=n?c:a;case 4:if(!(n?o<a:o>c)){s.next=10;break}return s.next=7,r[o%r.length];case 7:n?o++:o--,s.next=4;break;case 10:case"end":return s.stop()}}),dn)}function pn(e,t){return ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(bn(),"t0",2);case 2:return n.delegateYield(On(10),"t1",3);case 3:return n.delegateYield(vn(e,t,!0),"t2",4);case 4:return n.delegateYield(mn(2),"t3",5);case 5:return n.delegateYield(vn(e,t,!1),"t4",6);case 6:n.next=0;break;case 8:case"end":return n.stop()}}),fn)}var xn=function(e){return e.map((function(e){return e.color.next().value}))},hn=function(e,t){var n=Object(c.useState)([]),r=Object(f.a)(n,2),a=r[0],o=r[1],s=Object(c.useMemo)((function(){return function(e){return Array.from(e).map((function(t,n){return{char:t,key:n,color:pn(n,e.length)}}))}(e)}),[e]);return Object(c.useEffect)((function(){return o(xn(s))}),[s]),Zt((function(){return o(xn(s))}),t,[s]),[s,a]},gn=function(e){var t=e.name,n=e.speed,r=void 0===n?200:n,c=e.className,a=hn(t,r),o=Object(f.a)(a,2),s=o[0],i=o[1];return Object(A.jsxs)("div",{"data-testid":"app-logo",className:Ze()("flex flex-col items-center",c),children:[Object(A.jsx)("div",{className:"font-mono text-2xl",children:"welcome to"}),Object(A.jsx)("div",{className:"flex text-4xl font-logo font-bold",children:s.map((function(e){var t=e.key,n=e.char;return Object(A.jsx)("div",{"data-testid":"app-logo-".concat(t),className:i[t],children:n},t)}))})]})},yn=function(e){var t=e.selectStart,n=void 0===t?g.startLevel:t,r=Object(l.c)(n),a=Object(c.useMemo)((function(){return[{title:"New Game",action:Pe.start(r),active:!0},{title:"Level: ".concat(r),action:_.startLevel()},{title:"High Scores",action:_.open(p.HIGH_SCORES)},{title:"Options",action:_.open(p.OPTIONS)},{title:"Credits",action:_.open(p.CREDITS)}]}),[r]);return Object(A.jsxs)("div",{className:"flex flex-col h-full",children:[Object(A.jsx)(gn,{className:"mt-auto mb-14",name:d.brandName.toUpperCase()}),Object(A.jsx)(_t,{className:"w-44 ml-auto mr-auto",items:a}),Object(A.jsx)(jt,{className:"ml-auto mr-auto mt-5 mb-auto"})]})},Nn=function(){var e=Object(l.c)(m.welcoming),t=Object(u.a)("(min-width:600px)"),n=Object(u.a)("(max-height:850px)"),r=Object(u.a)("(max-width:380px)");Ct("/"),function(e){var t=Object(l.c)(g.persist),n=Ue();Object(c.useEffect)((function(){var t=localStorage.getItem(e);if(t)try{var r=JSON.parse(t);(null===r||void 0===r?void 0:r.version)===N&&n(_.persist(r))}catch(c){console.error("Could not read persist data.",c)}}),[e,n]),Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(t))}),[e,t])}(d.storageKey),function(){var e=Object(l.c)(m.status),t=Object(c.useMemo)((function(){return"".concat(St[e]," | ").concat(d.brandName)}),[e]);Object(c.useEffect)((function(){document.title=t}),[t])}();var a=Object(c.useMemo)((function(){return Object(A.jsx)(nt,{transparent:!t,large:!t&&!r,children:t?Object(A.jsx)(an,{floatControls:n}):Object(A.jsx)(on,{})})}),[t,n,r]);return Object(A.jsxs)("div",{className:"flex flex-col w-full h-full",children:[e?Object(A.jsx)(yn,{}):a,Object(A.jsx)(wt,{}),Object(A.jsx)(it,{}),Object(A.jsx)(lt,{}),Object(A.jsx)(kt,{}),Object(A.jsx)(qe,{})]})},kn=n(109),_n=function(e){var t=e.children;return function(){var e=Object(l.c)(g.dark);Object(c.useEffect)((function(){var t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")}),[e])}(),Object(A.jsx)(kn.b,{injectFirst:!0,children:t})},wn=function(e){var t=e.children,n=Object(c.useMemo)((function(){return ze()}),[]);return Object(A.jsx)(l.a,{store:n,children:Object(A.jsx)(_n,{children:t})})},Cn=(n(85),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))});d.analytics&&i.a.initialize(d.analytics),s.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(wn,{children:Object(A.jsx)(Nn,{})})}),document.getElementById("root")),Cn()}},[[86,1,2]]]);
//# sourceMappingURL=main.b40626ab.chunk.js.map